= Git LFS ã§ã®ç®¡ç†ã‚’åœæ­¢ã™ã‚‹
ç§‹ã€…ã™ã™ã
v1.0, 2020-11-20
:created_at: 2020-11-20
:tags: git, git-lfs
:toc: left
:toc-title: ç›®æ¬¡
:toclevels: 3
include::commons/attrs.adoc[]

== å‹•æ©ŸğŸ˜£
:site-1: https://www.gitlab.jp/blog/2020/07/10/how-to-migrate-git-lfs/[å°ã•ãªç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã¯Git LFSã§ç®¡ç†ã—ãªã„æ–¹ãŒã‚ˆã„ç†ç”± | GitLab.JP^]

_Git LFS_ ã«ã¤ã„ã¦

[quote,,'{site-1}']
____
ã‚µã‚¤ã‚ºãŒæ•°ç™¾ã‚­ãƒ­ãƒã‚¤ãƒˆç¨‹åº¦ã®ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’ _Git LFS_ ã§ç®¡ç†ã™ã‚‹ã“ã¨ã¯ã€ãƒ¡ãƒªãƒƒãƒˆã‚ˆã‚Šã‚‚ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã®æ–¹ãŒå¤§ãããªã‚‹å¯èƒ½æ€§ãŒé«˜ã„ã®ã§ã‚„ã‚ãŸã»ã†ãŒã‚ˆã„ã§ã—ã‚‡ã†ã€‚

ç‰¹ã«ã€ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ãŒå°‘ãªã„ã¯ã˜ã‚ã®ã†ã¡ã¯å•é¡ŒãŒãªã„ã‚ˆã†ã§ã‚‚ã€ ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ãŒå¢—ãˆã‚‹ã«ã¤ã‚Œã¦ clone ã‚„ checkout ã®é€Ÿåº¦ãŒé…ããªã‚‹ãªã©ã®å•é¡ŒãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã®ã§æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚
____

ã¨ã„ã†è©±ãŒã‚ã‚‹ã®ã§ã€å°ã•ã„ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã§ã‚‚ _Git LFS_ ç®¡ç†ã—ã¦ãŸã®ã‚’ã‚„ã‚ã‚‹ã“ã¨ã«ã—ãŸã€‚

.ç’°å¢ƒ
[autowidth]
|===
|App |Version

|git
|2.20.1

|git-lfs
|2.7.1
|===

== _Git LFS_ ç®¡ç†ã‚’ã‚„ã‚ã‚‹æ‰‹é †ğŸƒ

. _Git LFS_ ç®¡ç†å¯¾è±¡ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèª
+
[.command-line.no-line-numbers]
[source,bash,data-user="user",data-host="local"]
----
git lfs ls-files
----

. _Git LFS_ ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
+
.Git LFS ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã®ã‚³ãƒãƒ³ãƒ‰ä¾‹
[attributes]
====

[.command-line.no-line-numbers]
[source,bash,data-user="user",data-host="local"]
----
git lfs untrack '*.png' '*.jpg' '*.jpeg'  # <1>
git rm --cached path/to/file1 path/to/file2  # <2>
git lfs uninstall  # <3>
----
<1> _Git LFS_ ã®è¿½è·¡ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ï¼ˆ `.gitattributes` ã‹ã‚‰ï¼‰å‰Šé™¤
<2> ç¾åœ¨ã® Git ç®¡ç†å¯¾è±¡ã‹ã‚‰ãƒã‚¤ãƒŠãƒªãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤
<3> _Git LFS_ ã® _Hook_ ã‚„è¨­å®šã‚’ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
====
+
.å±¥æ­´ã‹ã‚‰ã‚‚æ¶ˆã—ã¦ç¶ºéº—ã«ã™ã‚‹å ´åˆ
[WARNING]
====
`git rm` ã®ä»£ã‚ã‚Šã«ä¸‹è¨˜ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã€‚
å…¨å±¥æ­´ã‚’æ›¸ãæ›ãˆã¦å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç„¡ã‹ã£ãŸã‚³ãƒˆã«ã™ã‚‹ãŸã‚ã€ãƒªãƒ¢ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã«ã¯å¼·åˆ¶ä¸Šæ›¸ãï¼ˆ `git push -f` ï¼‰ãŒå¿…è¦ã«ãªã‚‹ã€‚

[source,bash]
----
git filter-branch --force --index-filter \
  "git rm --cached --ignore-unmatch path/to/file1 path/to/file2" \
  --prune-empty --tag-name-filter cat -- --all
----
====

. _Git LFS_ ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¾Œã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒŸãƒƒãƒˆã—ç›´ã™
+
[.command-line.no-line-numbers]
[source,bash,data-user="user",data-host="local"]
----
git add .
git commit
----

***

ä»¥ä¸Šã§ _Git LFS_ ç®¡ç†ã®åœæ­¢å®Œäº†ğŸ˜ã€‚

== å‚è€ƒğŸ“–

* {site-1}
* https://docs.github.com/ja/free-pro-team@latest/github/managing-large-files/removing-files-from-git-large-file-storage[ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ Git Large File Storage ã‹ã‚‰å‰Šé™¤ã™ã‚‹ - GitHub Docs^]
