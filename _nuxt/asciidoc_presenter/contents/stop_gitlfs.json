{"filename":"stop_gitlfs.adoc","rendered":"<div id=\"toc\" class=\"toc\">\n<div id=\"toctitle\">目次</div>\n<ul class=\"sectlevel1\">\n<li><a href=\"#_動機\">動機😣</a></li>\n<li><a href=\"#_git_lfs_管理をやめる手順\"><em>Git LFS</em> 管理をやめる手順🏃</a></li>\n<li><a href=\"#_参考\">参考📖</a></li>\n</ul>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_動機\">動機😣</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p><em>Git LFS</em> について</p>\n</div>\n<div class=\"quoteblock\">\n<blockquote>\n<div class=\"paragraph\">\n<p>サイズが数百キロバイト程度の画像ファイルを <em>Git LFS</em> で管理することは、メリットよりもデメリットの方が大きくなる可能性が高いのでやめたほうがよいでしょう。</p>\n</div>\n<div class=\"paragraph\">\n<p>特に、画像ファイルが少ないはじめのうちは問題がないようでも、 画像ファイルが増えるにつれて clone や checkout の速度が遅くなるなどの問題が発生する可能性があるので注意が必要です。</p>\n</div>\n</blockquote>\n<div class=\"attribution\">\n&#8212; <a href=\"https://www.gitlab.jp/blog/2020/07/10/how-to-migrate-git-lfs/\" target=\"_blank\" rel=\"noopener\">小さな画像ファイルはGit LFSで管理しない方がよい理由 | GitLab.JP</a>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>という話があるので、小さい画像ファイルでも <em>Git LFS</em> 管理してたのをやめることにした。</p>\n</div>\n<table class=\"tableblock frame-all grid-all stretch\">\n<caption class=\"title\">Table 1. 環境</caption>\n<colgroup>\n<col style=\"width: 50%;\">\n<col style=\"width: 50%;\">\n</colgroup>\n<thead>\n<tr>\n<th class=\"tableblock halign-left valign-top\">App</th>\n<th class=\"tableblock halign-left valign-top\">Version</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">git</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">2.20.1</p></td>\n</tr>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">git-lfs</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">2.7.1</p></td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_git_lfs_管理をやめる手順\"><em>Git LFS</em> 管理をやめる手順🏃</h2>\n<div class=\"sectionbody\">\n<div class=\"olist arabic\">\n<ol class=\"arabic\">\n<li>\n<p><em>Git LFS</em> 管理対象のファイルを確認</p>\n<div \n    class=\"listingblock command-line no-line-numbers\">\n\n  <div class=\"content\">\n  <pre class=\"highlight command-line\" data-user=\"user\"\n    data-host=\"local\"\n    ><code class=\"language-bash\"\n    data-lang=\"bash\">git lfs ls-files</code></pre>\n  </div>\n</div>\n</li>\n<li>\n<p><em>Git LFS</em> アンインストール</p>\n<div class=\"exampleblock\">\n<div class=\"title\">Example 1. Git LFS アンインストールのコマンド例</div>\n<div class=\"content\">\n<div \n    class=\"listingblock command-line no-line-numbers\">\n\n  <div class=\"content\">\n  <pre class=\"highlight command-line\" data-user=\"user\"\n    data-host=\"local\"\n    ><code class=\"language-bash\"\n    data-lang=\"bash\">git lfs untrack '*.png' '*.jpg' '*.jpeg'  # <b class=\"conum\">(1)</b>\ngit rm --cached path/to/file1 path/to/file2  # <b class=\"conum\">(2)</b>\ngit lfs uninstall  # <b class=\"conum\">(3)</b></code></pre>\n  </div>\n</div>\n<div class=\"colist arabic\">\n<ol>\n<li>\n<p><em>Git LFS</em> の追跡パターンを（ <code>.gitattributes</code> から）削除</p>\n</li>\n<li>\n<p>現在の Git 管理対象からバイナリファイルを削除</p>\n</li>\n<li>\n<p><em>Git LFS</em> の <em>Hook</em> や設定をアンインストール</p>\n</li>\n</ol>\n</div>\n</div>\n</div>\n<div class=\"admonitionblock warning\">\n<table>\n<tr>\n<td class=\"icon\">\n<div class=\"title\"><span class=\"material-icons cursor-default\" alt=\"Warning\" title=\"Warning\">warning</span></div>\n</td>\n<td class=\"content\">\n<div class=\"title\">履歴からも消して綺麗にする場合</div>\n<div class=\"paragraph\">\n<p><code>git rm</code> の代わりに下記コマンドを実行。<br>\n全履歴を書き換えて対象ファイルを無かったコトにするため、リモートリポジトリには強制上書き（ <code>git push -f</code> ）が必要になる。</p>\n</div>\n<div \n    class=\"listingblock\">\n\n  <div class=\"content\">\n  <pre class=\"highlight \" ><code class=\"language-bash\"\n    data-lang=\"bash\">git filter-branch --force --index-filter \\\n  \"git rm --cached --ignore-unmatch path/to/file1 path/to/file2\" \\\n  --prune-empty --tag-name-filter cat -- --all</code></pre>\n  </div>\n</div>\n</td>\n</tr>\n</table>\n</div>\n</li>\n<li>\n<p><em>Git LFS</em> アンインストール後のファイルをコミットし直す</p>\n<div \n    class=\"listingblock command-line no-line-numbers\">\n\n  <div class=\"content\">\n  <pre class=\"highlight command-line\" data-user=\"user\"\n    data-host=\"local\"\n    ><code class=\"language-bash\"\n    data-lang=\"bash\">git add .\ngit commit</code></pre>\n  </div>\n</div>\n</li>\n</ol>\n</div>\n<hr>\n<div class=\"paragraph\">\n<p>以上で <em>Git LFS</em> 管理の停止完了😎。</p>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_参考\">参考📖</h2>\n<div class=\"sectionbody\">\n<div class=\"ulist\">\n<ul>\n<li>\n<p><a href=\"https://www.gitlab.jp/blog/2020/07/10/how-to-migrate-git-lfs/\" target=\"_blank\" rel=\"noopener\">小さな画像ファイルはGit LFSで管理しない方がよい理由 | GitLab.JP</a></p>\n</li>\n<li>\n<p><a href=\"https://docs.github.com/ja/free-pro-team@latest/github/managing-large-files/removing-files-from-git-large-file-storage\" target=\"_blank\" rel=\"noopener\">ファイルを Git Large File Storage から削除する - GitHub Docs</a></p>\n</li>\n</ul>\n</div>\n</div>\n</div>","title":"Git LFS での管理を停止する","created_at":"2020-11-20","tags":["git","git-lfs"],"updated_at":"2020-11-20","author":"秋々すすき","revision":"1.0"}