{"filename":"dotfiles_fish_fisher.adoc","rendered":"<div id=\"toc\" class=\"toc\">\n<div id=\"toctitle\">目次</div>\n<ul class=\"sectlevel1\">\n<li><a href=\"#_はじめに\">はじめに🤔</a></li>\n<li><a href=\"#_fisherプラグインの管理\">fisherプラグインの管理🎣</a>\n<ul class=\"sectlevel2\">\n<li><a href=\"#_fishfunctions_ディレクトリは管理外とする\">fish/functions ディレクトリは管理外とする</a></li>\n<li><a href=\"#_dotfiles_の_install_スクリプトの書き方\">dotfiles の install スクリプトの書き方</a></li>\n</ul>\n</li>\n<li><a href=\"#_余談\">余談🐟</a>\n<ul class=\"sectlevel2\">\n<li><a href=\"#_fishディレクトリにシンボリックリンクを張る理由\">fishディレクトリにシンボリックリンクを張る理由</a></li>\n</ul>\n</li>\n<li><a href=\"#_参考\">参考📖</a></li>\n</ul>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_はじめに\">はじめに🤔</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p><em>dotfiles</em> を運用するさいに <code>fisher</code> プラグインの管理をどうするかで悩んだ。<br>\n最初はそのまま <code>fish</code> ディレクトリまるごと管理してたけど、プラグインの関数ファイル全部込みになるのでやめたかった。</p>\n</div>\n<table class=\"tableblock frame-all grid-all fit-content\">\n<caption class=\"title\">Table 1. 環境</caption>\n<colgroup>\n<col>\n<col>\n</colgroup>\n<thead>\n<tr>\n<th class=\"tableblock halign-left valign-top\">App</th>\n<th class=\"tableblock halign-left valign-top\">Version</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">fish</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">3.0.2</p></td>\n</tr>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">fisher</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">4.1.0</p></td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_fisherプラグインの管理\">fisherプラグインの管理🎣</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p><code>fisher</code> は <code>fish_plugins</code> ファイルにインストール済みのプラグイン<sup class=\"footnote\">[<a id=\"_footnoteref_1\" class=\"footnote\" href=\"#_footnotedef_1\" title=\"View footnote.\">1</a>]</sup>を書き込む。<br>\nそして <code>fisher update</code> コマンド実行時に、このファイルを参照してインストールやアンインストールが行われる。</p>\n</div>\n<div class=\"paragraph\">\n<p>したがって <em>dotfiles</em> における <code>fisher</code> プラグイン管理は <code>fish_plugins</code> ファイルだけを管理しておけばいい。</p>\n</div>\n<div class=\"sect2\">\n<h3 id=\"_fishfunctions_ディレクトリは管理外とする\">fish/functions ディレクトリは管理外とする</h3>\n<div class=\"paragraph\">\n<p><code>fish/functions</code> ディレクトリには <code>fisher</code> プラグインの本体である関数が大量に格納されるため、<em>dotfiles</em> には含めずに管理外とする。</p>\n</div>\n<div class=\"paragraph\">\n<p>自作関数は別ディレクトリに配置しておき、ファイルごとに <code>fish/functions/*</code> ファイルへシンボリックリンクを張るようにする。</p>\n</div>\n</div>\n<div class=\"sect2\">\n<h3 id=\"_dotfiles_の_install_スクリプトの書き方\">dotfiles の install スクリプトの書き方</h3>\n<div class=\"paragraph\">\n<p><em>dotfiles</em> をインストールするスクリプトでは、下記のように <em>GitHub</em> から <code>fisher.fish</code> をダウンロードして実行するようにすればいい。</p>\n</div>\n<div \n    class=\"listingblock\">\n<div class=\"title\">fisher.fishを取得してアップデート実行</div>\n  <div class=\"content\">\n  <pre class=\"highlight \" ><code class=\"language-bash\"\n    data-lang=\"bash\">fish -c \"curl -sL git.io/fisher | source &amp;&amp; fisher update\"</code></pre>\n  </div>\n</div>\n<div class=\"admonitionblock note\">\n<table>\n<tr>\n<td class=\"icon\">\n<div class=\"title\"><span class=\"material-icons cursor-default\" alt=\"Note\" title=\"Note\">create</span></div>\n</td>\n<td class=\"content\">\n上記コマンドを実行するのであれば、<code>fisher</code> 自体も <em>dotfiles</em> に含める必要がない。\n</td>\n</tr>\n</table>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_余談\">余談🐟</h2>\n<div class=\"sectionbody\">\n<div class=\"sect2\">\n<h3 id=\"_fishディレクトリにシンボリックリンクを張る理由\">fishディレクトリにシンボリックリンクを張る理由</h3>\n<div class=\"paragraph\">\n<p>なぜかというと、<code>fish</code> はユニバーサル変数を <code>fish_variables</code> ファイルに出力する。<br>\nこのせいでシンボリックリンクが実ファイルに上書きされてしまうため。</p>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_参考\">参考📖</h2>\n<div class=\"sectionbody\">\n<div class=\"ulist\">\n<ul>\n<li>\n<p><a href=\"https://github.com/jorgebucaran/fisher\" target=\"_blank\" rel=\"noopener\">jorgebucaran/fisher</a></p>\n</li>\n</ul>\n</div>\n</div>\n</div>\n<div id=\"footnotes\">\n<hr>\n<div class=\"footnote\" id=\"_footnotedef_1\">\n<a href=\"#_footnoteref_1\">1</a>. <code>fisher</code> 自身も含まれる。\n</div>\n</div>","title":"dotfilesにおけるfisherプラグインの管理方法について","created_at":"2021-01-12","tags":["dotfiles","fish","備忘録"],"updated_at":"2021-01-12","author":"秋々すすき","revision":"1.0"}