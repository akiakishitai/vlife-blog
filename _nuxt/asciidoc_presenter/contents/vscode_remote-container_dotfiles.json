{"filename":"vscode_remote-container_dotfiles.adoc","rendered":"<div id=\"toc\" class=\"toc\">\n<div id=\"toctitle\">目次</div>\n<ul class=\"sectlevel1\">\n<li><a href=\"#_はじめに\">はじめに🏃</a></li>\n<li><a href=\"#_dotfiles_だけ再クローンインストールする方法\"><em>Dotfiles</em> だけ再クローン＆インストールする方法🐕</a></li>\n<li><a href=\"#_おわりに\">おわりに😎</a></li>\n</ul>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_はじめに\">はじめに🏃</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p><em>VS Code</em> の <em>Remote Containers</em> 拡張機能を使って開発するのが便利。</p>\n</div>\n<div class=\"paragraph\">\n<p>そんな中で <em>GitHub</em> 管理していた <em>Dotfiles</em> を環境構築中に変更したため、再度クローン＆インストールを行いたいときがまれにある。<br>\n<em>Dotfiles</em> のためだけにコンテナを再構築させるのもどうかな～っていうときの方法についてのメモ。</p>\n</div>\n<div class=\"admonitionblock note\">\n<table>\n<tr>\n<td class=\"icon\">\n<i class=\"fa icon-note\" title=\"Note\" data-md-icon=\"info\"></i>\n</td>\n<td class=\"content\">\nつまりめちゃくちゃ限定的というかニッチというか……。<br>\nコンテナ再構築するだけでいいし……。\n</td>\n</tr>\n</table>\n</div>\n<table class=\"tableblock frame-all grid-all stretch\">\n<caption class=\"title\">Table 1. 実行環境</caption>\n<colgroup>\n<col style=\"width: 50%;\">\n<col style=\"width: 50%;\">\n</colgroup>\n<thead>\n<tr>\n<th class=\"tableblock halign-left valign-top\">App</th>\n<th class=\"tableblock halign-left valign-top\">Version</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\"><em>VS Code</em></p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">1.53.2</p></td>\n</tr>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\"><em>Remote - Containers</em></p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">0.158.0</p></td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_dotfiles_だけ再クローンインストールする方法\"><em>Dotfiles</em> だけ再クローン＆インストールする方法🐕</h2>\n<div class=\"sectionbody\">\n<div class=\"admonitionblock caution\">\n<table>\n<tr>\n<td class=\"icon\">\n<i class=\"fa icon-caution\" title=\"Caution\" data-md-icon=\"local_fire_department\"></i>\n</td>\n<td class=\"content\">\n通常の使い方ではコンテナを再構築すればいいだけなことに注意。\n</td>\n</tr>\n</table>\n</div>\n<div class=\"olist arabic\">\n<div class=\"title\">コンテナを再構築させないでやる方法</div>\n<ol class=\"arabic\">\n<li>\n<p><em>VS Code</em> で <em>Remote Containers</em> 接続する。</p>\n</li>\n<li>\n<p>コンテナ内の <code>~/.vscode-server/data/Machine/.dotfilesMarker</code> ファイルを削除する。</p>\n<div class=\"paragraph\">\n<p>このファイルが存在すると <em>Dotfiles</em> のクローン＆インストール作業がスキップされてしまうため。</p>\n</div>\n<div \n    class=\"listingblock no-line-numbers command-line\">\n\n  <div class=\"content\">\n  <pre class=\"highlight command-line\" data-host=\"remote\"\n    data-user=\"vscode\"\n    ><code class=\"language-bash\"\n    data-lang=\"bash\">rm ~/.vscode-server/data/Machine/.dotfilesMarker</code></pre>\n  </div>\n</div>\n</li>\n<li>\n<p><em>Remote Containers</em> を再接続する。</p>\n<div class=\"paragraph\">\n<p>再接続すると <em>Dotfiles</em> の再クローン＆インストール処理が行われる。</p>\n</div>\n</li>\n</ol>\n</div>\n<hr>\n<div class=\"paragraph\">\n<p>以上。</p>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_おわりに\">おわりに😎</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>この情報が欲しかったのは、実は<a href=\"https://code.visualstudio.com/docs/remote/containers-advanced#_avoiding-extension-reinstalls-on-container-rebuild\" target=\"_blank\" rel=\"noopener\">コンテナ再構築するたびに拡張機能を再インストールすることを避ける</a>方法を間違えてたせい。<br>\nうっかり <code>~/.vscode-server</code> ディレクトリをマウントしてたので「あれ？コンテナ再構築しても <em>Dotfiles</em> が再クローンされない……」ってなってた。</p>\n</div>\n<div class=\"paragraph\">\n<p>正しいやり方ならばコンテナ再構築したときに <em>Dotfiles</em> もクローンし直されるので、上記説明は要らない子になる……😥。</p>\n</div>\n</div>\n</div>","title":"【VS Code】Remote Containers 拡張機能において Dotfiles を再クローン＆インストールさせる","created_at":"2021-04-12","tags":["vscode","remote-containers","dotfiles","備忘録"],"updated_at":"2021-04-12","author":"秋々すすき","revision":"1.0"}