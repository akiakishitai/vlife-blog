{"filename":"github_actions_linter_pr_title.adoc","rendered":"<div id=\"toc\" class=\"toc\">\n<div id=\"toctitle\">目次</div>\n<ul class=\"sectlevel1\">\n<li><a href=\"#_動機\">動機🧐</a></li>\n<li><a href=\"#_github_apps_で自動チェックする\"><em>GitHub Apps</em> で自動チェックする🔬</a></li>\n<li><a href=\"#_semantic_pull_requests_インストール\"><em>Semantic Pull Requests</em> インストール🚀</a></li>\n<li><a href=\"#_semantic_pull_requests_の設定\"><em>Semantic Pull Requests</em> の設定⚙️</a>\n<ul class=\"sectlevel2\">\n<li><a href=\"#_ブランチの保護設定\">ブランチの保護設定</a></li>\n<li><a href=\"#_設定ファイル\">設定ファイル</a></li>\n</ul>\n</li>\n<li><a href=\"#_おわりに\">おわりに😎</a></li>\n<li><a href=\"#_参考\">参考📖</a></li>\n</ul>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_動機\">動機🧐</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p><a href=\"https://github.com/release-drafter/release-drafter\" target=\"_blank\" rel=\"noopener\">release-drafter</a> を使ってリリース作業を自動化しようとしたとき、プルリクエストのタイトルが <a href=\"https://conventionalcommits.org/\" target=\"_blank\" rel=\"noopener\">Conventional Commits</a> 規約に従っている必要がある。</p>\n</div>\n<div class=\"paragraph\">\n<p>よってプルリクエストを作成したら書式を自動チェックさせたい。</p>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_github_apps_で自動チェックする\"><em>GitHub Apps</em> で自動チェックする🔬</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p><a href=\"https://github.com/zeke/semantic-pull-requests\" target=\"_blank\" rel=\"noopener\">Semantic Pull Requests</a> という <a href=\"https://docs.github.com/ja/free-pro-team@latest/developers/apps/about-apps#github-apps-%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\" target=\"_blank\" rel=\"noopener\"><em>GitHub Apps</em></a> を使えば、自分のリポジトリ全体（もしくは特定の一部）でプルリクエストの書式を検証できる。</p>\n</div>\n<div class=\"paragraph\">\n<p>これはプルリクエストのタイトルまたはコミットが <em>Conventional Commits</em> の規約に則っていることを検証する。<br>\nデフォルトではプルリクエストのタイトルもしくは最低1つのコミットが <em>Conventional Commits</em> 規約に則っていればOKとする。</p>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_semantic_pull_requests_インストール\"><em>Semantic Pull Requests</em> インストール🚀</h2>\n<div class=\"sectionbody\">\n<div class=\"olist arabic\">\n<ol class=\"arabic\">\n<li>\n<p><a href=\"https://github.com/apps/semantic-pull-requests\" target=\"_blank\" rel=\"noopener\"><em>GitHub Apps</em> ページ</a>からインストール開始</p>\n<details>\n<summary class=\"title\">画像</summary>\n<div class=\"content\">\n<div class=\"paragraph\">\n<p><span class=\"image\"><img src=\"_images/github-apps/semantic-pull-requests_install01.png\" alt=\"GitHub Apps page\" width=\"480\" title=\"Semantic Pull Requests\"></span></p>\n</div>\n</div>\n</details>\n</li>\n<li>\n<p>適用するリポジトリ対象を選択してインストール</p>\n<details>\n<summary class=\"title\">画像</summary>\n<div class=\"content\">\n<div class=\"paragraph\">\n<p><span class=\"image\"><img src=\"_images/github-apps/semantic-pull-requests_install02.png\" alt=\"インストール画像\" width=\"480\" height=\"480\" title=\"全リポジトリを選択してインストール\"></span></p>\n</div>\n</div>\n</details>\n</li>\n<li>\n<p>設定変更は <code>Settings</code> &#8594; <code>Applications</code> から行う</p>\n<details>\n<summary class=\"title\">画像</summary>\n<div class=\"content\">\n<div class=\"paragraph\">\n<p><span class=\"image\"><img src=\"_images/github-apps/semantic-pull-requests_install04.png\" alt=\"GitHub Apps の設定\" width=\"480\" height=\"480\" title=\"インストール済みの GitHub Apps\"></span></p>\n</div>\n</div>\n</details>\n</li>\n</ol>\n</div>\n<hr>\n<div class=\"paragraph\">\n<p>以上、とりあえずインストールボタンをクリックするだけで動くようになる。</p>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_semantic_pull_requests_の設定\"><em>Semantic Pull Requests</em> の設定⚙️</h2>\n<div class=\"sectionbody\">\n<div class=\"sect2\">\n<h3 id=\"_ブランチの保護設定\"><a href=\"https://docs.github.com/ja/free-pro-team@latest/github/administering-a-repository/configuring-protected-branches\" target=\"_blank\" rel=\"noopener\">ブランチの保護設定</a></h3>\n<div class=\"paragraph\">\n<p><em>GitHub</em> の設定になるが、リポジトリで<a href=\"https://docs.github.com/ja/free-pro-team@latest/github/administering-a-repository/configuring-protected-branches\" target=\"_blank\" rel=\"noopener\">ブランチの保護設定</a>を有効化して <em>Semantic Pull Requests</em> のチェックを必須にしておくのがおすすめ。</p>\n</div>\n<div class=\"paragraph\">\n<p>必須にしておくことでプルリクエストが <em>Conventional Commits</em> 規約に従っていることを保証できる。</p>\n</div>\n</div>\n<div class=\"sect2\">\n<h3 id=\"_設定ファイル\">設定ファイル</h3>\n<div class=\"paragraph\">\n<p>デフォルト設定のまま動かすのであれば必要ない。<br>\n動作を変更したい場合は、リポジトリ内で <code>.github/semantic.yml</code> ファイルを作成して設定・管理する。</p>\n</div>\n<table class=\"tableblock frame-all grid-all fit-content\">\n<caption class=\"title\">Table 1. 設定オプション</caption>\n<colgroup>\n<col>\n<col>\n<col>\n</colgroup>\n<thead>\n<tr>\n<th class=\"tableblock halign-left valign-top\">プロパティ</th>\n<th class=\"tableblock halign-left valign-top\">値</th>\n<th class=\"tableblock halign-left valign-top\">説明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\"><code>titleOnly</code></p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">boolean</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">コミットは無視してプルリクエストのタイトルを検証する</p></td>\n</tr>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\"><code>commitsOnly</code></p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">boolean</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">プルリクエストのタイトルは無視してコミットを検証する</p></td>\n</tr>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\"><code>titleAndCommits</code></p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">boolean</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">プルリクエストのタイトルと全てのコミットを検証する</p></td>\n</tr>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\"><code>anyCommit</code></p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">boolean</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">少なくとも1つのコミットが合格する必要がある<br>\nこの設定は <code>commitsOnly</code> または <code>titleAndCommits</code> が有効な場合にのみ有効</p></td>\n</tr>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\"><code>scopes</code></p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">array</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">適正とする <em>scope</em> の値を配列で指定する</p></td>\n</tr>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\"><code>types</code></p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">array</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">適正とする <em>type</em> の値を配列で指定する<br>\nデフォルト値は <a href=\"https://github.com/commitizen/conventional-commit-types/blob/v3.0.0/index.json\" target=\"_blank\" rel=\"noopener\">commitizen/conventional-commit-types</a> と同じ</p></td>\n</tr>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\"><code>allowMergeCommits</code></p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">boolean</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">マージコミット（ <em>Merge branch 'main' into &#8230;&#8203;</em> ）を許容する<br>\n<code>commitsOnly</code> または <code>titleAndCommits</code> が有効な場合にのみ有効</p></td>\n</tr>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\"><code>allowRevertCommits</code></p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">boolean</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">Revertコミット（ <em>Revert \"feat: nanika\"</em> ）を許容する<br>\n<code>commitsOnly</code> または <code>titleAndCommits</code> が有効な場合にのみ有効</p></td>\n</tr>\n</tbody>\n</table>\n<div class=\"exampleblock\">\n<div class=\"title\">Example 1. プルリクエストのタイトルだけを検証したい</div>\n<div class=\"content\">\n<div \n    class=\"listingblock\">\n<div class=\"title\">.github/semantic.yml</div>\n  <div class=\"content\">\n  <pre class=\"highlight \" ><code class=\"language-yaml\"\n    data-lang=\"yaml\">titleOnly: true\ncommitsOnly: false\ntitleAndCommits: false</code></pre>\n  </div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_おわりに\">おわりに😎</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p><em>Semantic Pull Requests</em> を使うことで、プルリクエストのタイトルが <em>Conventional Commits</em> 規約に従っているかどうかを自動チェックさせることができた。</p>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_参考\">参考📖</h2>\n<div class=\"sectionbody\">\n<div class=\"ulist\">\n<ul>\n<li>\n<p><a href=\"https://github.com/zeke/semantic-pull-requests\" target=\"_blank\" rel=\"noopener\">zeke/semantic-pull-request</a></p>\n</li>\n</ul>\n</div>\n</div>\n</div>","title":"GitHubのプルリクエストがConventional Commits規約に則っていることを自動で検証","created_at":"2021-01-15","tags":["github","github-actions","linter","conventional-commits"],"updated_at":"2021-01-15","author":"秋々すすき","revision":"1.0"}