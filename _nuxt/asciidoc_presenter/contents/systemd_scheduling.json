{
  "filename": "systemd_scheduling.adoc",
  "rendered": [
    "<div id=\"toc\" class=\"toc\">",
    "<div id=\"toctitle\">ç›®æ¬¡</div>",
    "<ul class=\"sectlevel1\">",
    "<li><a href=\"#_ã¯ã˜ã‚ã«\">ğŸã¯ã˜ã‚ã«</a></li>",
    "<li><a href=\"#_systemd_ã‚µãƒ¼ãƒ“ã‚¹ã¨ã—ã¦å®Ÿè¡Œã‚¸ãƒ§ãƒ–ã‚’è¨­å®š\">ğŸ•â€ğŸ¦º <em>systemd</em> ã‚µãƒ¼ãƒ“ã‚¹ã¨ã—ã¦å®Ÿè¡Œã‚¸ãƒ§ãƒ–ã‚’è¨­å®š</a>",
    "<ul class=\"sectlevel2\">",
    "<li><a href=\"#_ã‚¸ãƒ§ãƒ–ã‚’ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¨ã—ã¦ä½œæˆ\">ã‚¸ãƒ§ãƒ–ã‚’ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¨ã—ã¦ä½œæˆ</a></li>",
    "<li><a href=\"#_systemd_ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½œæˆ\"><em>systemd</em> ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½œæˆ</a></li>",
    "</ul>",
    "</li>",
    "<li><a href=\"#_systemd_timer_ã‚’ä½¿ã£ã¦å®šæœŸçš„ã«_systemd_service_ã‚’å®Ÿè¡Œ\">â° <em>systemd.timer</em> ã‚’ä½¿ã£ã¦å®šæœŸçš„ã« <em>systemd.service</em> ã‚’å®Ÿè¡Œ</a></li>",
    "<li><a href=\"#_è£œè¶³äº‹é …\">ğŸ–Šï¸è£œè¶³äº‹é …</a>",
    "<ul class=\"sectlevel2\">",
    "<li><a href=\"#_about_oncalendar_value\">OnCalendar ã®å€¤ã«ã¤ã„ã¦</a></li>",
    "<li><a href=\"#_ã‚·ã‚¹ãƒ†ãƒ çµ‚äº†æ™‚ã«_systemd_service_ã‚’å®Ÿè¡Œã—ãŸã„å ´åˆ\">ã‚·ã‚¹ãƒ†ãƒ çµ‚äº†æ™‚ã« <em>systemd.service</em> ã‚’å®Ÿè¡Œã—ãŸã„å ´åˆ</a></li>",
    "</ul>",
    "</li>",
    "<li><a href=\"#_å‚è€ƒ\">ğŸ“–å‚è€ƒ</a></li>",
    "</ul>",
    "</div>",
    "<div class=\"sect1\">",
    "<h2 id=\"_ã¯ã˜ã‚ã«\">ğŸã¯ã˜ã‚ã«</h2>",
    "<div class=\"sectionbody\">",
    "<div class=\"paragraph\">",
    "<p><code>cron</code> ã‚’ä½¿ã‚ãšã¨ã‚‚ <em>systemd</em> ã‚’ä½¿ã£ã¦ã‚¸ãƒ§ãƒ–ã‚’å®šæœŸçš„ã«å®Ÿè¡Œã§ãã‚‹ã€‚<br>",
    "ä¸€èˆ¬çš„ãªLinuxãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã¯ <em>systemd</em> ã‚’ä½¿ã£ã¦ã„ã‚‹ãŸã‚ã€ã“ã¡ã‚‰ã®åˆ©ç”¨æ–¹æ³•ã‚’å‚™å¿˜éŒ²ã—ã¦ãŠãã€‚</p>",
    "</div>",
    "<div class=\"paragraph\">",
    "<p>ä»Šå›ã‚„ã‚‹ <em>systemd</em> ã«ã‚ˆã‚‹å®šæœŸå®Ÿè¡Œã«ã¤ã„ã¦ã¯ã€</p>",
    "</div>",
    "<div class=\"olist arabic\">",
    "<ol class=\"arabic\">",
    "<li>",
    "<p>å®Ÿè¡Œã—ãŸã„ã‚¸ãƒ§ãƒ–ã‚’ <em>systemd</em> ã‚µãƒ¼ãƒ“ã‚¹ã¨ã—ã¦è¨­å®š</p>",
    "</li>",
    "<li>",
    "<p><em>systemd.timer</em> ã‹ã‚‰ä¸Šè¨˜ã‚µãƒ¼ãƒ“ã‚¹ã‚’å®Ÿè¡Œ</p>",
    "</li>",
    "</ol>",
    "</div>",
    "<div class=\"paragraph\">",
    "<p>ã¨ã™ã‚Œã°ã„ã„ã€‚</p>",
    "</div>",
    "</div>",
    "</div>",
    "<div class=\"sect1\">",
    "<h2 id=\"_systemd_ã‚µãƒ¼ãƒ“ã‚¹ã¨ã—ã¦å®Ÿè¡Œã‚¸ãƒ§ãƒ–ã‚’è¨­å®š\">ğŸ•â€ğŸ¦º <em>systemd</em> ã‚µãƒ¼ãƒ“ã‚¹ã¨ã—ã¦å®Ÿè¡Œã‚¸ãƒ§ãƒ–ã‚’è¨­å®š</h2>",
    "<div class=\"sectionbody\">",
    "<div class=\"olist arabic\">",
    "<ol class=\"arabic\">",
    "<li>",
    "<p>å®Ÿè¡Œã™ã‚‹ã‚¸ãƒ§ãƒ–ã‚’ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«ã™ã‚‹</p>",
    "</li>",
    "<li>",
    "<p>ä¸Šè¨˜ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ <em>systemd.service</em> ã‚’ä½œæˆ</p>",
    "</li>",
    "</ol>",
    "</div>",
    "<div class=\"admonitionblock important\">",
    "<table>",
    "<tr>",
    "<td class=\"icon\">",
    "<i class=\"fa icon-important\" title=\"Important\" data-md-icon=\"report\"></i>",
    "</td>",
    "<td class=\"content\">",
    "ä»Šå›ä½œæˆã™ã‚‹ <em>systemd.service</em> ã¯ <em>systemd</em> ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã§å‹•ã‹ã™ï¼ˆ<code>systemctl --user &lt;subcommand&gt;</code>ï¼‰ã“ã¨ã‚’å‰æã«ã™ã‚‹ã€‚",
    "</td>",
    "</tr>",
    "</table>",
    "</div>",
    "<div class=\"sect2\">",
    "<h3 id=\"_ã‚¸ãƒ§ãƒ–ã‚’ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¨ã—ã¦ä½œæˆ\">ã‚¸ãƒ§ãƒ–ã‚’ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¨ã—ã¦ä½œæˆ</h3>",
    "<div class=\"paragraph\">",
    "<p><em>systemd.service</em> ã«ã‚³ãƒãƒ³ãƒ‰ã‚’ç›´æ¥è¨˜è¿°ã™ã‚‹å ´åˆã¯ã„ãã¤ã‹æ³¨æ„ã™ã¹ãç‚¹ãŒã‚ã‚‹<sup class=\"footnote\">[<a id=\"_footnoteref_1\" class=\"footnote\" href=\"#_footnotedef_1\" title=\"View footnote.\">1</a>]</sup>ã€‚<br>",
    "ã‚ˆã£ã¦ã€å®Ÿè¡Œã—ãŸã„ã‚¸ãƒ§ãƒ–ã¯ã‚ã‚‰ã‹ã˜ã‚ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«ã—ã¦ãŠãã“ã¨ã‚’æ¨å¥¨ã€‚</p>",
    "</div>",
    "<div class=\"exampleblock\">",
    "<div class=\"title\">Example 1. ã‚¸ãƒ§ãƒ–ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½œæˆ</div>",
    "<div class=\"content\">",
    "<div ",
    "    class=\"listingblock no-line-numbers command-line\">",
    "<div class=\"title\">å¼•æ•°ã‚’æ¨™æº–å‡ºåŠ›ã«è¿”ã™ã ã‘ã®ãƒ†ã‚¹ãƒˆç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆ</div>",
    "  <div class=\"content\">",
    "  <pre class=\"highlight command-line\" data-user=\"pi\"",
    "    data-host=\"raspi\"",
    "    data-output=\"3-6\"",
    "    ><code class=\"language-bash\"",
    "    data-lang=\"bash\">mkdir -p ~/.local/bin    <i class=\"conum\" data-value=\"1\"></i><b>(1)</b>",
    "tee ~/.local/bin/hello.sh &lt;&lt;'EOF'",
    "#!/bin/bash",
    "echo \"Hello,\" \"$@\" \"!\"",
    "EOF",
    "",
    "chmod u+x ~/.local/bin/hello.sh    <i class=\"conum\" data-value=\"2\"></i><b>(2)</b></code></pre>",
    "  </div>",
    "</div>",
    "<div class=\"colist arabic\">",
    "<table>",
    "<tr>",
    "<td><i class=\"conum\" data-value=\"1\"></i><b>1</b></td>",
    "<td><em>systemd</em> ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã§ä½¿ã†ãŸã‚ã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ <code>~/.local/bin</code> ã«é…ç½®ã—ãŸã€‚</td>",
    "</tr>",
    "<tr>",
    "<td><i class=\"conum\" data-value=\"2\"></i><b>2</b></td>",
    "<td>å®Ÿè¡Œæ¨©é™ã‚’ä¸ãˆã‚‹ã“ã¨ã‚’å¿˜ã‚Œãšã«ã€‚</td>",
    "</tr>",
    "</table>",
    "</div>",
    "</div>",
    "</div>",
    "<hr>",
    "<details>",
    "<summary class=\"title\">ç›´æ¥ã‚³ãƒãƒ³ãƒ‰ã‚’è¨˜è¿°ã™ã‚‹å ´åˆã¯ã€ã“ã†ã„ã†ã“ã¨ã«æ³¨æ„ã™ã‚‹ã€‚</summary>",
    "<div class=\"content\">",
    "<div class=\"admonitionblock tip\">",
    "<table>",
    "<tr>",
    "<td class=\"icon\">",
    "<i class=\"fa icon-tip\" title=\"Tip\" data-md-icon=\"emoji_objects\"></i>",
    "</td>",
    "<td class=\"content\">",
    "<div class=\"title\">systemd.service Exec</div>",
    "<div class=\"paragraph\">",
    "<p>ã‚·ã‚§ãƒ«æ§‹æ–‡ã¯å¤‰æ•°ã®å±•é–‹ï¼ˆ<code>${&#8230;&#8203;}</code>ï¼‰ãã‚‰ã„ã—ã‹ä½¿ãˆãªã„ï¼ˆãªãŠãƒã‚¹ãƒˆã•ã‚ŒãŸå¤‰æ•°å±•é–‹ã¯ã†ã¾ãæ©Ÿèƒ½ã—ãªã„ï¼‰ã€‚<br>",
    "ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆï¼ˆ<code>&gt;</code>, <code>&gt;&gt;</code> <code>&lt;</code>, <code>&lt;&lt;</code>ï¼‰ã‚„ãƒ‘ã‚¤ãƒ—ï¼ˆ<code>|</code>ï¼‰ã‚’ä½¿ã„ãŸã„å ´åˆã¯ ã‚·ã‚§ãƒ«ï¼ˆ<code>sh</code>, <code>bash</code>ï¼‰ã«å¼•æ•°ã¨ã—ã¦ã‚³ãƒãƒ³ãƒ‰æ–‡ã‚’æ¸¡ã™ã—ã‹ãªã„ã€‚<br>",
    "ï¼ˆã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ä½œæˆã—ã¦ãŠã„ã¦ã€ãã‚Œã‚’å®Ÿè¡Œã™ã‚‹ã»ã†ãŒç­‹ã¨ã—ã¦ã¯è‰¯ã•ãã†ï¼‰</p>",
    "</div>",
    "<div ",
    "    class=\"listingblock no-line-numbers command-line\">",
    "",
    "  <div class=\"content\">",
    "  <pre class=\"highlight command-line\" data-user=\"pi\"",
    "    data-host=\"raspi\"",
    "    data-output=\"2-10\"",
    "    ><code class=\"language-bash\"",
    "    data-lang=\"bash\">ExecStart=bash -c \"echo 'hoge' &gt; /tmp/hoge.txt\"</code></pre>",
    "  </div>",
    "</div>",
    "</td>",
    "</tr>",
    "</table>",
    "</div>",
    "<div class=\"admonitionblock tip\">",
    "<table>",
    "<tr>",
    "<td class=\"icon\">",
    "<i class=\"fa icon-tip\" title=\"Tip\" data-md-icon=\"emoji_objects\"></i>",
    "</td>",
    "<td class=\"content\">",
    "<div class=\"title\">systemd.service Exec</div>",
    "<div class=\"paragraph\">",
    "<p>ã‚³ãƒãƒ³ãƒ‰ãŒçµ¶å¯¾ãƒ‘ã‚¹ã§ä¸ãˆã‚‰ã‚Œã¦ã„ãªã„å ´åˆã€<code>systemd</code> ã¯ã‚·ã‚¹ãƒ†ãƒ ã”ã¨ã«æ±ºã‚ã‚‰ã‚ŒãŸãƒ‘ã‚¹ã‹ã‚‰ã‚³ãƒãƒ³ãƒ‰ã‚’æ¤œç´¢ã™ã‚‹ã€‚<br>",
    "åŸºæœ¬çš„ã«ã¯çµ¶å¯¾ãƒ‘ã‚¹ã‚’ä½¿ã†ã“ã¨ãŒæ¨å¥¨ã•ã‚Œã‚‹ã€‚</p>",
    "</div>",
    "<div ",
    "    class=\"listingblock no-line-numbers command-line\">",
    "<div class=\"title\">systemd ãŒã‚³ãƒãƒ³ãƒ‰ã‚’æ¤œç´¢ã™ã‚‹ãƒ‘ã‚¹ã®ç¢ºèª</div>",
    "  <div class=\"content\">",
    "  <pre class=\"highlight command-line\" data-user=\"pi\"",
    "    data-host=\"raspi\"",
    "    data-output=\"2-10\"",
    "    ><code class=\"language-bash\"",
    "    data-lang=\"bash\">systemd-path search-binaries-default | tr \":\" \" \"",
    "/usr/local/sbin /usr/local/bin /usr/sbin /usr/bin /sbin /bin</code></pre>",
    "  </div>",
    "</div>",
    "</td>",
    "</tr>",
    "</table>",
    "</div>",
    "</div>",
    "</details>",
    "</div>",
    "<div class=\"sect2\">",
    "<h3 id=\"_systemd_ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½œæˆ\"><em>systemd</em> ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½œæˆ</h3>",
    "<div class=\"exampleblock\">",
    "<div class=\"title\">Example 2. systemd.service ã‚’ä½œæˆ</div>",
    "<div class=\"content\">",
    "<div ",
    "    class=\"listingblock no-line-numbers command-line\">",
    "<div class=\"title\">systemd.service ã‚’æ–°è¦ä½œæˆ</div>",
    "  <div class=\"content\">",
    "  <pre class=\"highlight command-line\" data-user=\"pi\"",
    "    data-host=\"raspi\"",
    "    data-output=\"2-10\"",
    "    ><code class=\"language-bash\"",
    "    data-lang=\"bash\">systemctl edit --user --force --full demo@.service</code></pre>",
    "  </div>",
    "</div>",
    "<div ",
    "    class=\"listingblock\">",
    "<div class=\"title\">~/.config/systemd/user/demo@.service</div>",
    "  <div class=\"content\">",
    "  <pre class=\"highlight \" ><code class=\"language-ini\"",
    "    data-lang=\"ini\">[Unit]",
    "Description=Demo service",
    "",
    "[Service]",
    "Type=oneshot",
    "ExecStart=%h/.local/bin/hello.sh %i   <i class=\"conum\" data-value=\"1\"></i><b>(1)</b>",
    "",
    "[Install]",
    "WantedBy=multi-user.target</code></pre>",
    "  </div>",
    "</div>",
    "<div class=\"colist arabic\">",
    "<table>",
    "<tr>",
    "<td><i class=\"conum\" data-value=\"1\"></i><b>1</b></td>",
    "<td><a href=\"https://man.archlinux.org/man/systemd.unit.5.en#SPECIFIERS\" target=\"_blank\" rel=\"noopener\">ãƒ¦ãƒ‹ãƒƒãƒˆæŒ‡å®šå­</a>ã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹ã€‚<br>",
    "<code>%h</code> &#8594; ã“ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’å®Ÿè¡Œã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ›ãƒ¼ãƒ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ‘ã‚¹ã€‚<br>",
    "<code>%i</code> &#8594; ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åï¼ˆãƒ¦ãƒ‹ãƒƒãƒˆåã® <code>@</code> è¨˜å·ã‹ã‚‰æ‹¡å¼µå­ã¾ã§ã®é–“ã«ã‚ã‚‹æ–‡å­—åˆ—ï¼‰ã€‚</td>",
    "</tr>",
    "</table>",
    "</div>",
    "<div ",
    "    class=\"listingblock no-line-numbers command-line\">",
    "<div class=\"title\">service ã‚’ãƒ†ã‚¹ãƒˆèµ·å‹•</div>",
    "  <div class=\"content\">",
    "  <pre class=\"highlight command-line\" data-user=\"pi\"",
    "    data-host=\"raspi\"",
    "    data-output=\"3-20\"",
    "    ><code class=\"language-bash\"",
    "    data-lang=\"bash\">systemctl --user start demo@sample.service",
    "systemctl --user status demo@sample.service",
    "â— demo@sample.service - Demo service",
    "     Loaded: loaded (/home/hoge/.config/systemd/user/demo@.service; disabled; vendor preset: enabled)",
    "     Active: inactive (dead)",
    "",
    "Oct 23 22:12:38 raspberrypi systemd[747]: Starting Demo service...",
    "Oct 23 22:12:38 raspberrypi hello.sh[15180]: Hello, sample !",
    "Oct 23 22:12:38 raspberrypi systemd[747]: demo@sample.service: Succeeded.",
    "Oct 23 22:12:38 raspberrypi systemd[747]: Started Demo service.</code></pre>",
    "  </div>",
    "</div>",
    "<div class=\"admonitionblock tip\">",
    "<table>",
    "<tr>",
    "<td class=\"icon\">",
    "<i class=\"fa icon-tip\" title=\"Tip\" data-md-icon=\"emoji_objects\"></i>",
    "</td>",
    "<td class=\"content\">",
    "ãƒ¦ãƒ‹ãƒƒãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®æ‹¡å¼µå­ï¼ˆ<code>.service</code> ã‚„ <code>.socket</code>ï¼‰ã®ç›´å‰ã« <code>@</code> è¨˜å·ã‚’ã¤ã‘ã‚‹ã¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ¦ãƒ‹ãƒƒãƒˆã«ãªã‚‹ã€‚<br>",
    "å¼•æ•°ã‚’ä¸ãˆã¦ãƒ¦ãƒ‹ãƒƒãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®æŒ™å‹•ã‚’ä¸€éƒ¨å¤‰æ›´ã•ã›ãŸã„ã¨ãã«ä¾¿åˆ©ã€‚",
    "</td>",
    "</tr>",
    "</table>",
    "</div>",
    "</div>",
    "</div>",
    "</div>",
    "</div>",
    "</div>",
    "<div class=\"sect1\">",
    "<h2 id=\"_systemd_timer_ã‚’ä½¿ã£ã¦å®šæœŸçš„ã«_systemd_service_ã‚’å®Ÿè¡Œ\">â° <em>systemd.timer</em> ã‚’ä½¿ã£ã¦å®šæœŸçš„ã« <em>systemd.service</em> ã‚’å®Ÿè¡Œ</h2>",
    "<div class=\"sectionbody\">",
    "<div class=\"exampleblock\">",
    "<div class=\"title\">Example 3. systemd.timer ã§å®šæœŸå®Ÿè¡Œ</div>",
    "<div class=\"content\">",
    "<div ",
    "    class=\"listingblock no-line-numbers command-line\">",
    "<div class=\"title\">systemd.timer ã‚’æ–°è¦ä½œæˆ</div>",
    "  <div class=\"content\">",
    "  <pre class=\"highlight command-line\" data-user=\"pi\"",
    "    data-host=\"raspi\"",
    "    data-output=\"2-10\"",
    "    ><code class=\"language-bash\"",
    "    data-lang=\"bash\">systemctl edit --user --force --full demo@schedule.timer</code></pre>",
    "  </div>",
    "</div>",
    "<div ",
    "    class=\"listingblock\">",
    "<div class=\"title\">~/.config/systemd/user/demo@schedule.timer</div>",
    "  <div class=\"content\">",
    "  <pre class=\"highlight \" ><code class=\"language-ini\"",
    "    data-lang=\"ini\">[Timer]",
    "OnCalendar=*-*-* *:00/10:00   <i class=\"conum\" data-value=\"1\"></i><b>(1)</b>",
    "AccuracySec=1m  <i class=\"conum\" data-value=\"2\"></i><b>(2)</b>",
    "#Unit=demo@sample.service   <i class=\"conum\" data-value=\"3\"></i><b>(3)</b></code></pre>",
    "  </div>",
    "</div>",
    "<div class=\"colist arabic\">",
    "<table>",
    "<tr>",
    "<td><i class=\"conum\" data-value=\"1\"></i><b>1</b></td>",
    "<td>10åˆ†æ¯ã«å®šæœŸå®Ÿè¡Œã€‚æ›¸å¼ã«ã¤ã„ã¦ã¯<a href=\"#_about_oncalendar_value\">å¾Œè¿°</a>ã€‚</td>",
    "</tr>",
    "<tr>",
    "<td><i class=\"conum\" data-value=\"2\"></i><b>2</b></td>",
    "<td>ç²¾åº¦ã€‚ã“ã“ã®ä¾‹ã§ã¯æŒ‡å®šã—ãŸæ™‚åˆ»ã‹ã‚‰1åˆ†ä»¥å†…ã®ã©ã“ã‹ã§å®Ÿè¡Œã•ã‚Œã‚‹ã“ã¨ã«ãªã‚‹ã€‚<br>",
    "å°ã•ãã™ã‚Œã°ã™ã‚‹ã»ã©CPUè² è·ãŒé«˜ããªã‚‹ã®ã§æ³¨æ„ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¯1åˆ†ï¼‰ã€‚</td>",
    "</tr>",
    "<tr>",
    "<td><i class=\"conum\" data-value=\"3\"></i><b>3</b></td>",
    "<td>ã“ã® <em>timer</em> ã§å®Ÿè¡Œã™ã‚‹ãƒ¦ãƒ‹ãƒƒãƒˆã‚’æŒ‡å®šã™ã‚‹ï¼ˆæœ¬ä¾‹ã§ã¯ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆï¼‰ã€‚<br>",
    "æŒ‡å®šãŒãªã‘ã‚Œã° <em>timer</em> ã¨åŒåã® <em>service</em> ã‚’å®Ÿè¡Œã™ã‚‹ã€‚</td>",
    "</tr>",
    "</table>",
    "</div>",
    "<div ",
    "    class=\"listingblock no-line-numbers command-line\">",
    "<div class=\"title\">ã‚¿ã‚¤ãƒãƒ¼ã‚’ãƒ†ã‚¹ãƒˆèµ·å‹•</div>",
    "  <div class=\"content\">",
    "  <pre class=\"highlight command-line\" data-user=\"pi\"",
    "    data-host=\"raspi\"",
    "    data-output=\"3-20\"",
    "    ><code class=\"language-bash\"",
    "    data-lang=\"bash\">systemctl --user start demo@schedule.timer",
    "systemctl --user status demo@schedule.timer",
    "â— demo@schedule.timer",
    "     Loaded: loaded (/home/suzutsuki/.config/systemd/user/demo@schedule.timer; static)",
    "     Active: active (waiting) since Sun 2021-10-24 00:05:15 JST; 9s ago",
    "    Trigger: Sun 2021-10-24 00:10:00 JST; 4min 35s left",
    "   Triggers: â— demo@schedule.service",
    "",
    "Oct 24 00:05:15 raspberrypi systemd[747]: Started demo@schedule.timer.</code></pre>",
    "  </div>",
    "</div>",
    "<div ",
    "    class=\"listingblock no-line-numbers command-line\">",
    "<div class=\"title\">ãƒ­ã‚°ã‚’ç¢ºèª</div>",
    "  <div class=\"content\">",
    "  <pre class=\"highlight command-line\" data-user=\"pi\"",
    "    data-host=\"raspi\"",
    "    data-output=\"2-30\"",
    "    ><code class=\"language-bash\"",
    "    data-lang=\"bash\">journalctl --user --unit demo@schedule.service",
    "Oct 24 00:10:22 raspberrypi systemd[747]: Starting Demo service...",
    "Oct 24 00:10:22 raspberrypi hello.sh[16109]: Hello, schedule !",
    "Oct 24 00:10:22 raspberrypi systemd[747]: demo@schedule.service: Succeeded.",
    "Oct 24 00:10:22 raspberrypi systemd[747]: Started Demo service.",
    "Oct 24 00:20:22 raspberrypi systemd[747]: Starting Demo service...",
    "Oct 24 00:20:22 raspberrypi hello.sh[16125]: Hello, schedule !",
    "Oct 24 00:20:22 raspberrypi systemd[747]: demo@schedule.service: Succeeded.",
    "Oct 24 00:20:22 raspberrypi systemd[747]: Started Demo service.",
    "Oct 24 00:30:22 raspberrypi systemd[747]: Starting Demo service...",
    "Oct 24 00:30:22 raspberrypi hello.sh[16133]: Hello, schedule !",
    "Oct 24 00:30:22 raspberrypi systemd[747]: demo@schedule.service: Succeeded.",
    "Oct 24 00:30:22 raspberrypi systemd[747]: Started Demo service.",
    "Oct 24 00:40:22 raspberrypi systemd[747]: Starting Demo service...</code></pre>",
    "  </div>",
    "</div>",
    "</div>",
    "</div>",
    "<hr>",
    "<div class=\"paragraph\">",
    "<p>ä½œæˆã—ãŸ <em>systemd.timer</em> ãŒæœŸå¾…é€šã‚Šå‹•ä½œã™ã‚‹ã‚ˆã†ãªã‚‰OKã€‚<br>",
    "ã‚ã¨ã¯è‡ªå‹•èµ·å‹•ã‚’æœ‰åŠ¹åŒ–ã—ã¦ãŠãã€‚</p>",
    "</div>",
    "<div ",
    "    class=\"listingblock no-line-numbers command-line\">",
    "<div class=\"title\">ã‚¿ã‚¤ãƒãƒ¼ã®è‡ªå‹•èµ·å‹•ã‚’æœ‰åŠ¹åŒ–</div>",
    "  <div class=\"content\">",
    "  <pre class=\"highlight command-line\" data-user=\"pi\"",
    "    data-host=\"raspi\"",
    "    data-output=\"2-10\"",
    "    ><code class=\"language-bash\"",
    "    data-lang=\"bash\">systemctl --user enable demo@schedule.timer</code></pre>",
    "  </div>",
    "</div>",
    "<div class=\"paragraph\">",
    "<p>ğŸ˜ğŸ‘</p>",
    "</div>",
    "</div>",
    "</div>",
    "<div class=\"sect1\">",
    "<h2 id=\"_è£œè¶³äº‹é …\">ğŸ–Šï¸è£œè¶³äº‹é …</h2>",
    "<div class=\"sectionbody\">",
    "<div class=\"sect2\">",
    "<h3 id=\"_about_oncalendar_value\">OnCalendar ã®å€¤ã«ã¤ã„ã¦</h3>",
    "<div class=\"paragraph\">",
    "<p><a href=\"https://man.archlinux.org/man/systemd.time.7.en\" target=\"_blank\" rel=\"noopener\">systemd.time(7) â€” Arch manual pages</a> ã‚’å‚è€ƒã€‚<br>",
    "æ›¸å¼ã¨ã—ã¦ã¯ <code>YYYY-MM-DD hh:mm:ss</code> ã®å½¢ã«ãªã‚‹ï¼ˆæ›œæ—¥æŒ‡å®šã‚‚ã§ãã‚‹ã‘ã©å‰²æ„›ï¼‰ã€‚</p>",
    "</div>",
    "<div class=\"paragraph\">",
    "<p>ã“ã®å€¤ã«ã¤ã„ã¦ã®æ¤œè¨¼ã¯ <code>systemd-analyze calendar</code> ã‚³ãƒãƒ³ãƒ‰ã‚’åˆ©ç”¨ã™ã‚‹ã€‚</p>",
    "</div>",
    "<div class=\"exampleblock\">",
    "<div class=\"title\">Example 4. OnCalendar ã®å€¤ã«ã¤ã„ã¦æ¤œè¨¼ä¾‹</div>",
    "<div class=\"content\">",
    "<div ",
    "    class=\"listingblock no-line-numbers command-line\">",
    "",
    "  <div class=\"content\">",
    "  <pre class=\"highlight command-line\" data-user=\"pi\"",
    "    data-host=\"raspi\"",
    "    data-output=\"2-3,5-10\"",
    "    ><code class=\"language-bash\"",
    "    data-lang=\"bash\">systemd-analyze calendar '4h'",
    "Failed to parse calendar specification '4h': Invalid argument",
    "",
    "systemd-analyze calendar '00,04,08,12,16,20:15:00'",
    "  Original form: 00,04,08,12,16,20:15:00",
    "Normalized form: *-*-* 00,04,08,12,16,20:15:00",
    "    Next elapse: Sun 2021-10-24 00:15:00 JST",
    "       (in UTC): Sat 2021-10-23 15:15:00 UTC",
    "       From now: 1h 58min left</code></pre>",
    "  </div>",
    "</div>",
    "</div>",
    "</div>",
    "<table class=\"tableblock frame-all grid-all fit-content\">",
    "<caption class=\"title\">Table 1. OnCalendarã§ä½¿ãˆã‚‹è¨˜å·</caption>",
    "<colgroup>",
    "<col>",
    "<col>",
    "<col>",
    "<col>",
    "</colgroup>",
    "<thead>",
    "<tr>",
    "<th class=\"tableblock halign-center valign-top\">è¨˜å·</th>",
    "<th class=\"tableblock halign-left valign-top\">èª¬æ˜</th>",
    "<th class=\"tableblock halign-center valign-top\">ä½¿ç”¨ä¾‹</th>",
    "<th class=\"tableblock halign-left valign-top\"></th>",
    "</tr>",
    "</thead>",
    "<tbody>",
    "<tr>",
    "<td class=\"tableblock halign-center valign-top\"><p class=\"tableblock\"><code>*</code></p></td>",
    "<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰<br>",
    "ï¼ˆä»»æ„ã®å€¤ï¼‰</p></td>",
    "<td class=\"tableblock halign-left valign-top\"><div class=\"literal\"><pre>*-*-* *:30:00</pre></div></td>",
    "<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">æ™‚åˆ»ãŒ30åˆ†ã‚’æŒ‡ã™ãŸã³ã«å®Ÿè¡Œã€‚</p></td>",
    "</tr>",
    "<tr>",
    "<td class=\"tableblock halign-center valign-top\"><p class=\"tableblock\"><code>,</code></p></td>",
    "<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">è¤‡æ•°æŒ‡å®š</p></td>",
    "<td class=\"tableblock halign-left valign-top\"><div class=\"literal\"><pre>*-*-10,20 00:00:00</pre></div></td>",
    "<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">10æ—¥ã¨20æ—¥ã®åˆå‰0æ™‚ã«å®Ÿè¡Œã€‚</p></td>",
    "</tr>",
    "<tr>",
    "<td class=\"tableblock halign-center valign-top\"><p class=\"tableblock\"><code>..</code></p></td>",
    "<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">ç¯„å›²æŒ‡å®š</p></td>",
    "<td class=\"tableblock halign-left valign-top\"><div class=\"literal\"><pre>*-*-05..10 12:00:00</pre></div></td>",
    "<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">5æ—¥ã‹ã‚‰10æ—¥ã«ã‹ã‘ã¦ã€12æ™‚ã«å®Ÿè¡Œã€‚</p></td>",
    "</tr>",
    "<tr>",
    "<td class=\"tableblock halign-center valign-top\"><p class=\"tableblock\"><code>/</code></p></td>",
    "<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">ç¹°ã‚Šè¿”ã—é–“éš”</p></td>",
    "<td class=\"tableblock halign-left valign-top\"><div class=\"literal\"><pre>*-*-* *:00/15:00</pre></div></td>",
    "<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">15åˆ†ã”ã¨ã«å®Ÿè¡Œã€‚<br>",
    "ï¼ˆ00, 15, 30, 45åˆ†æ™‚ã«ãã‚Œãã‚Œå®Ÿè¡Œï¼‰</p></td>",
    "</tr>",
    "<tr>",
    "<td class=\"tableblock halign-center valign-top\"><p class=\"tableblock\"><code>~</code></p></td>",
    "<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">æœˆæœ«æœ€çµ‚æ—¥ã‹ã‚‰</p></td>",
    "<td class=\"tableblock halign-left valign-top\"><div class=\"literal\"><pre>*-10~03 00:00:00</pre></div></td>",
    "<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">10æœˆæœ«ã‹ã‚‰æ•°ãˆã¦3æ—¥ç›®ã€<br>",
    "ã¤ã¾ã‚Š10æœˆ29æ—¥ã®åˆå‰0æ™‚ã«å®Ÿè¡Œã€‚</p></td>",
    "</tr>",
    "</tbody>",
    "</table>",
    "</div>",
    "<div class=\"sect2\">",
    "<h3 id=\"_ã‚·ã‚¹ãƒ†ãƒ çµ‚äº†æ™‚ã«_systemd_service_ã‚’å®Ÿè¡Œã—ãŸã„å ´åˆ\">ã‚·ã‚¹ãƒ†ãƒ çµ‚äº†æ™‚ã« <em>systemd.service</em> ã‚’å®Ÿè¡Œã—ãŸã„å ´åˆ</h3>",
    "<div class=\"paragraph\">",
    "<p><code>shutdown.target</code> å‰ã«å®Ÿè¡Œã•ã‚Œã‚‹ <em>systemd.service</em> ã¨ã—ã¦å®Ÿè£…ã™ã‚Œã°ã„ã„ï¼ˆ<em>systemd.timer</em> ã¯ä½¿ã‚ãªã„ï¼‰ã€‚</p>",
    "</div>",
    "<div class=\"admonitionblock caution\">",
    "<table>",
    "<tr>",
    "<td class=\"icon\">",
    "<i class=\"fa icon-caution\" title=\"Caution\" data-md-icon=\"local_fire_department\"></i>",
    "</td>",
    "<td class=\"content\">",
    "ã“ã®æ–¹æ³•ã§ã¯<strong>é›»æºå–ªå¤±ï¼ˆåœé›»ãªã©ï¼‰ã«å¯¾å¿œã§ããªã„</strong>ã“ã¨ã«æ³¨æ„ã€‚<br>",
    "é€šå¸¸ã®ã‚·ãƒ£ãƒƒãƒˆãƒ€ã‚¦ãƒ³æ“ä½œãŒå®Ÿè¡Œã•ã‚ŒãŸæ™‚ã®ã¿æœ‰åŠ¹ã¨ãªã‚‹ã€‚",
    "</td>",
    "</tr>",
    "</table>",
    "</div>",
    "<div class=\"exampleblock\">",
    "<div class=\"title\">Example 5. ã‚·ãƒ£ãƒƒãƒˆãƒ€ã‚¦ãƒ³æ™‚ã«å®Ÿè¡Œã•ã›ãŸã„å ´åˆã®ä¾‹</div>",
    "<div class=\"content\">",
    "<div ",
    "    class=\"listingblock no-line-numbers command-line\">",
    "<div class=\"title\">ã‚·ãƒ£ãƒƒãƒˆãƒ€ã‚¦ãƒ³æ™‚ã«å®Ÿè¡Œã•ã‚Œã‚‹ systemd.service</div>",
    "  <div class=\"content\">",
    "  <pre class=\"highlight command-line\" data-user=\"pi\"",
    "    data-host=\"raspi\"",
    "    data-output=\"2-30\"",
    "    ><code class=\"language-bash\"",
    "    data-lang=\"bash\">sudo systemctl edit --force --full run-on-shutdown.service</code></pre>",
    "  </div>",
    "</div>",
    "<div ",
    "    class=\"listingblock\">",
    "",
    "  <div class=\"content\">",
    "  <pre class=\"highlight \" ><code class=\"language-ini\"",
    "    data-lang=\"ini\">[Unit]",
    "Description=Run scripts on shutdown",
    "Before=shutdown.target   <i class=\"conum\" data-value=\"1\"></i><b>(1)</b>",
    "DefaultDependencies=no   <i class=\"conum\" data-value=\"2\"></i><b>(2)</b>",
    "",
    "[Service]",
    "Type=oneshot",
    "RemainAfterExit=yes",
    "ExecStart=/usr/local/bin/run-on-shutdown.sh",
    "",
    "[Install]",
    "WantedBy=shutdown.target <i class=\"conum\" data-value=\"3\"></i><b>(3)</b></code></pre>",
    "  </div>",
    "</div>",
    "<div class=\"colist arabic\">",
    "<table>",
    "<tr>",
    "<td><i class=\"conum\" data-value=\"1\"></i><b>1</b></td>",
    "<td>ã‚·ãƒ£ãƒƒãƒˆãƒ€ã‚¦ãƒ³ã™ã‚‹å‰ã«ã“ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’å®Ÿè¡Œã•ã›ã‚‹ã€‚</td>",
    "</tr>",
    "<tr>",
    "<td><i class=\"conum\" data-value=\"2\"></i><b>2</b></td>",
    "<td>èµ·å‹•åˆæœŸã‚„ã‚·ãƒ£ãƒƒãƒˆãƒ€ã‚¦ãƒ³æ™‚ã«å®Ÿè¡Œã•ã›ã‚‹å ´åˆã¯ <em>no</em> ã«ã—ãŸã»ã†ãŒã„ã„ã‚‰ã—ã„ã€‚</td>",
    "</tr>",
    "<tr>",
    "<td><i class=\"conum\" data-value=\"3\"></i><b>3</b></td>",
    "<td>ã‚·ãƒ£ãƒƒãƒˆãƒ€ã‚¦ãƒ³æ™‚ã«å®Ÿè¡Œã•ã›ã‚‹ãŸã‚ã®æŒ‡å®šã€‚</td>",
    "</tr>",
    "</table>",
    "</div>",
    "<div ",
    "    class=\"listingblock no-line-numbers command-line\">",
    "<div class=\"title\">æœ‰åŠ¹åŒ–</div>",
    "  <div class=\"content\">",
    "  <pre class=\"highlight command-line\" data-user=\"pi\"",
    "    data-host=\"raspi\"",
    "    ><code class=\"language-bash\"",
    "    data-lang=\"bash\">sudo systemctl daemon-reload",
    "sudo systemctl enable run-on-shutdown.service</code></pre>",
    "  </div>",
    "</div>",
    "</div>",
    "</div>",
    "</div>",
    "</div>",
    "</div>",
    "<div class=\"sect1\">",
    "<h2 id=\"_å‚è€ƒ\">ğŸ“–å‚è€ƒ</h2>",
    "<div class=\"sectionbody\">",
    "<div class=\"ulist\">",
    "<div class=\"title\">systemd.service</div>",
    "<ul>",
    "<li>",
    "<p><a href=\"https://man.archlinux.org/man/systemd.service.5.en\" target=\"_blank\" rel=\"noopener\">systemd.service(5) â€” Arch manual pages</a></p>",
    "</li>",
    "<li>",
    "<p><a href=\"https://man.archlinux.org/man/systemd.unit.5.en\" target=\"_blank\" rel=\"noopener\">systemd.unit(5) â€” Arch manual pages</a></p>",
    "</li>",
    "<li>",
    "<p><a href=\"https://www.freedesktop.org/software/systemd/man/systemd.syntax.html#\" target=\"_blank\" rel=\"noopener\">systemd.syntax</a></p>",
    "</li>",
    "<li>",
    "<p><a href=\"https://www.digitalocean.com/community/tutorials/how-to-use-systemctl-to-manage-systemd-services-and-units-ja\" target=\"_blank\" rel=\"noopener\">Systemctlã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½¿ç”¨ã—ã¦Systemdã‚µãƒ¼ãƒ“ã‚¹ã¨ãƒ¦ãƒ‹ãƒƒãƒˆã‚’ç®¡ç†ã™ã‚‹æ–¹æ³• | DigitalOcean</a></p>",
    "</li>",
    "<li>",
    "<p><a href=\"https://access.redhat.com/documentation/ja-jp/red_hat_enterprise_linux/7/html/system_administrators_guide/sect-managing_services_with_systemd-unit_files\" target=\"_blank\" rel=\"noopener\">10.6. systemd ã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆãŠã‚ˆã³å¤‰æ›´ RedÂ Hat Enterprise Linux 7 | Red Hat Customer Portal</a></p>",
    "</li>",
    "<li>",
    "<p><a href=\"https://enakai00.hatenablog.com/entry/20130917/1379374797\" target=\"_blank\" rel=\"noopener\">Systemdå…¥é–€(4) - serviceã‚¿ã‚¤ãƒ—Unitã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ« - ã‚ã‚‚ã‚ã‚‚</a></p>",
    "</li>",
    "<li>",
    "<p><a href=\"https://askubuntu.com/questions/1312766/systemd-script-not-running-on-shutdown\" target=\"_blank\" rel=\"noopener\">bash - Systemd script not running on shutdown - Ask Ubuntu</a></p>",
    "</li>",
    "</ul>",
    "</div>",
    "<div class=\"ulist\">",
    "<div class=\"title\">systemd.timer</div>",
    "<ul>",
    "<li>",
    "<p><a href=\"https://wiki.archlinux.jp/index.php/Systemd/%E3%82%BF%E3%82%A4%E3%83%9E%E3%83%BC\" target=\"_blank\" rel=\"noopener\">systemd/ã‚¿ã‚¤ãƒãƒ¼ - ArchWiki</a></p>",
    "</li>",
    "<li>",
    "<p><a href=\"https://man.archlinux.org/man/systemd.timer.5\" target=\"_blank\" rel=\"noopener\">systemd.timer(5) â€” Arch manual pages</a></p>",
    "</li>",
    "<li>",
    "<p><a href=\"https://man.archlinux.org/man/systemd.time.7.en\" target=\"_blank\" rel=\"noopener\">systemd.time(7) â€” Arch manual pages</a></p>",
    "</li>",
    "<li>",
    "<p><a href=\"https://man.archlinux.org/man/systemd-analyze.1.en\" target=\"_blank\" rel=\"noopener\">systemd-analyze(1) â€” Arch manual pages</a></p>",
    "</li>",
    "</ul>",
    "</div>",
    "</div>",
    "</div>",
    "<div id=\"footnotes\">",
    "<hr>",
    "<div class=\"footnote\" id=\"_footnotedef_1\">",
    "<a href=\"#_footnoteref_1\">1</a>. <code>bash</code> ã®ç’°å¢ƒå¤‰æ•°ãŒä½¿ãˆãªã„ã¨ã‹å¤‰æ•°å±•é–‹ãŒã†ã¾ãã„ã‹ãªã„ã¨ã‹ã€‚",
    "</div>",
    "</div>"
  ],
  "title": "systemd ã‚’ä½¿ã£ã¦ã‚¸ãƒ§ãƒ–ã‚’å®šæœŸå®Ÿè¡Œã•ã›ã‚‹å‚™å¿˜éŒ²",
  "created_at": "2021-10-25",
  "tags": [
    "linux",
    "systemd",
    "timer",
    "å‚™å¿˜éŒ²"
  ],
  "updated_at": "2021-10-25",
  "author": "ç§‹ã€…ã™ã™ã",
  "revision": "1.0"
}