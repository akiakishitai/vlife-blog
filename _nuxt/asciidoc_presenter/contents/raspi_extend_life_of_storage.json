{"filename":"raspi_extend_life_of_storage.adoc","rendered":"<div id=\"toc\" class=\"toc\">\n<div id=\"toctitle\">ç›®æ¬¡</div>\n<ul class=\"sectlevel1\">\n<li><a href=\"#_ã¯ã˜ã‚ã«\">ğŸ¥§ã¯ã˜ã‚ã«</a></li>\n<li><a href=\"#_ã‚¹ãƒ¯ãƒƒãƒ—ã®èª¿æ•´\">ğŸ—ƒï¸ã‚¹ãƒ¯ãƒƒãƒ—ã®èª¿æ•´</a></li>\n<li><a href=\"#_ãƒã‚¦ãƒ³ãƒˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‹ã‚‰_atime_ã‚’é™¤å¤–ã™ã‚‹\">ğŸ”ªãƒã‚¦ãƒ³ãƒˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‹ã‚‰ <code>atime</code> ã‚’é™¤å¤–ã™ã‚‹</a></li>\n<li><a href=\"#_ãƒ­ã‚°\">ğŸ“Šãƒ­ã‚°</a>\n<ul class=\"sectlevel2\">\n<li><a href=\"#_tmpfs_ã‚’ä½¿ã£ã¦ãƒ¡ãƒ¢ãƒªä¸Šã«ãƒ­ã‚°ã‚’å‡ºåŠ›ã™ã‚‹\"><code>tmpfs</code> ã‚’ä½¿ã£ã¦ãƒ¡ãƒ¢ãƒªä¸Šã«ãƒ­ã‚°ã‚’å‡ºåŠ›ã™ã‚‹</a></li>\n<li><a href=\"#_ãƒ­ã‚°ã®å‡ºåŠ›ã‚’æŠ‘åˆ¶\">ãƒ­ã‚°ã®å‡ºåŠ›ã‚’æŠ‘åˆ¶</a></li>\n<li><a href=\"#_systemd_ã®_journal_ãƒ­ã‚°\">systemd ã® journal ãƒ­ã‚°</a></li>\n</ul>\n</li>\n<li><a href=\"#_å‚è€ƒ\">ğŸ“–å‚è€ƒ</a></li>\n</ul>\n</div>\n<div id=\"preamble\">\n<div class=\"sectionbody\">\n<table class=\"tableblock frame-all grid-all fit-content\">\n<caption class=\"title\">Table 1. ç’°å¢ƒ</caption>\n<colgroup>\n<col>\n<col>\n</colgroup>\n<thead>\n<tr>\n<th class=\"tableblock halign-left valign-top\"></th>\n<th class=\"tableblock halign-left valign-top\">Version</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">Raspberry Pi 4B</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">4GB</p></td>\n</tr>\n<tr>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">Raspberry Pi OS Lite</p></td>\n<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\">Debian 10 (buster) 64bit</p></td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_ã¯ã˜ã‚ã«\">ğŸ¥§ã¯ã˜ã‚ã«</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p><em>Raspberry Pi 4B</em> ã§ã€èµ·å‹•ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¸ã®æ›¸ãè¾¼ã¿ã‚’æŠ‘ãˆã¦å¯¿å‘½ã‚’ä¼¸ã°ã™ãŸã‚ã«è¡Œã£ãŸã“ã¨ã®å‚™å¿˜éŒ²ã€‚</p>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_ã‚¹ãƒ¯ãƒƒãƒ—ã®èª¿æ•´\">ğŸ—ƒï¸ã‚¹ãƒ¯ãƒƒãƒ—ã®èª¿æ•´</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>ã‚¹ãƒ¯ãƒƒãƒ—ã¯ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®äºˆç´„é ˜åŸŸã§èª­ã¿æ›¸ãã‚’è¡Œã†ãŸã‚ã€ç†è«–çš„ã«ã¯ç„¡åŠ¹åŒ–ã—ãŸã»ã†ãŒã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å¯¿å‘½ã‚’ä¼¸ã°ã›ã‚‹ã€‚</p>\n</div>\n<div class=\"paragraph\">\n<p>ãŸã ã—ã€</p>\n</div>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>ã‚¹ãƒ¯ãƒƒãƒ—ã¯ãƒ¡ãƒ¢ãƒªã®åˆ©ç”¨ã«ã¤ã„ã¦æœ€é©åŒ–ã™ã‚‹</p>\n</li>\n<li>\n<p>ç„¡åŠ¹åŒ–ã™ã‚‹ã¨ã‚·ã‚¹ãƒ†ãƒ ãŒä¸å®‰å®šã«ãªã‚‹æã‚ŒãŒã‚ã‚‹</p>\n</li>\n</ul>\n</div>\n<div class=\"paragraph\">\n<p>ã¨ã„ã†ç‚¹ã‹ã‚‰ã€ç„¡åŠ¹åŒ–ã§ã¯ãªãã‚µã‚¤ã‚ºã‚’èª¿æ•´ã™ã‚‹æ–¹æ³•ã‚’ã¨ã£ãŸã€‚</p>\n</div>\n<div class=\"exampleblock\">\n<div class=\"title\">Example 1. ã‚¹ãƒ¯ãƒƒãƒ—ã‚µã‚¤ã‚ºã®å¤‰æ›´</div>\n<div class=\"content\">\n<div class=\"admonitionblock note\">\n<table>\n<tr>\n<td class=\"icon\">\n<i class=\"fa icon-note\" title=\"Note\" data-md-icon=\"info\"></i>\n</td>\n<td class=\"content\">\n<div class=\"title\">æ¨å¥¨ã‚µã‚¤ã‚ºã«ã¤ã„ã¦</div>\nã‚µãƒ¼ãƒãƒ¼ã¨ã—ã¦ã®åˆ©ç”¨ï¼†ãƒ¡ãƒ¢ãƒª 2GB ä»¥ä¸Š &#8594; ã¨ã‚Šã‚ãˆãšãƒ¡ãƒ¢ãƒªã®åŠåˆ†ã§ã„ã„ï¼ˆå‚è€ƒï¼š<a href=\"https://help.ubuntu.com/community/SwapFaq\" target=\"_blank\" rel=\"noopener\">SwapFaq - Community Help Wiki</a>ï¼‰ã€‚<br>\nã‚ã¨ã¯ã‚·ã‚¹ãƒ†ãƒ ã®åˆ©ç”¨çŠ¶æ³ã‚’è¦‹ã¦å¢—æ¸›ã—ã¦ãŠãã€‚\n</td>\n</tr>\n</table>\n</div>\n<div class=\"paragraph\">\n<p>å¤‰æ›´ã™ã‚‹å ´åˆã¯ <a href=\"https://manpages.debian.org/buster/dphys-swapfile/dphys-swapfile.8.en.html\" target=\"_blank\" rel=\"noopener\"><code>/etc/dphys-swapfile</code></a> ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿®æ­£ã™ã‚‹ã€‚</p>\n</div>\n<div \n    class=\"listingblock\">\n<div class=\"title\">/etc/dphys-swapfile</div>\n  <div class=\"content\">\n  <pre class=\"highlight \" ><code class=\"language-ini\"\n    data-lang=\"ini\">CONF_SWAPSIZE=100   <i class=\"conum\" data-value=\"1\"></i><b>(1)</b>\nCONF_SWAPFILE=/var/swap     <i class=\"conum\" data-value=\"2\"></i><b>(2)</b></code></pre>\n  </div>\n</div>\n<div class=\"colist arabic\">\n<table>\n<tr>\n<td><i class=\"conum\" data-value=\"1\"></i><b>1</b></td>\n<td><strong>MB</strong> å˜ä½ã§ã‚¹ãƒ¯ãƒƒãƒ—ã‚µã‚¤ã‚ºã‚’æŒ‡å®šã€‚<br>\nğŸ‘‰ æ¨å¥¨ã‚µã‚¤ã‚ºã¨ç•°ãªã‚‹ãŒã€ç¾åœ¨ã‚·ã‚¹ãƒ†ãƒ ãŒãƒ¡ãƒ¢ãƒªã‚’ã»ã¨ã‚“ã©ä½¿ã£ã¦ãªã„ã®ã§å°‘ãªãã—ã¦ã„ã‚‹ã€‚</td>\n</tr>\n<tr>\n<td><i class=\"conum\" data-value=\"2\"></i><b>2</b></td>\n<td>USBã‚„å¤–ä»˜ã‘ãƒ‰ãƒ©ã‚¤ãƒ–ã«ã‚¹ãƒ¯ãƒƒãƒ—ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿å­˜ã—ãŸã„å ´åˆã¯ã“ã“ã®ãƒ‘ã‚¹ã‚’å¤‰æ›´ã™ã‚‹ã€‚</td>\n</tr>\n</table>\n</div>\n<div \n    class=\"listingblock no-line-numbers command-line\">\n<div class=\"title\">å¤‰æ›´ã—ãŸã‚¹ãƒ¯ãƒƒãƒ—è¨­å®šã‚’é©ç”¨</div>\n  <div class=\"content\">\n  <pre class=\"highlight command-line\" data-user=\"pi\"\n    data-host=\"raspi\"\n    data-output=\"2-10\"\n    ><code class=\"language-bash\"\n    data-lang=\"bash\">sudo service dphys-swapfile restart</code></pre>\n  </div>\n</div>\n<div \n    class=\"listingblock no-line-numbers command-line\">\n<div class=\"title\">ã‚¹ãƒ¯ãƒƒãƒ—ã®ç¢ºèª</div>\n  <div class=\"content\">\n  <pre class=\"highlight command-line\" data-user=\"pi\"\n    data-host=\"raspi\"\n    data-output=\"2-10\"\n    ><code class=\"language-bash\"\n    data-lang=\"bash\">swapon --show=NAME,TYPE,SIZE,USED\nNAME      TYPE SIZE USED\n/var/swap file 100M   0B</code></pre>\n  </div>\n</div>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_ãƒã‚¦ãƒ³ãƒˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‹ã‚‰_atime_ã‚’é™¤å¤–ã™ã‚‹\">ğŸ”ªãƒã‚¦ãƒ³ãƒˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‹ã‚‰ <code>atime</code> ã‚’é™¤å¤–ã™ã‚‹</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p><code>atime</code> ã ã¨é »ç¹ã«æ›¸ãè¾¼ã¿å‡¦ç†ãŒç™ºç”Ÿã™ã‚‹ãŸã‚ã€ä»£ã‚ã‚Šã« <code>noatime</code> ã‚„ <code>relatime</code> ã‚’ä½¿ç”¨ã™ã‚‹ã€‚</p>\n</div>\n<div class=\"admonitionblock note\">\n<table>\n<tr>\n<td class=\"icon\">\n<i class=\"fa icon-note\" title=\"Note\" data-md-icon=\"info\"></i>\n</td>\n<td class=\"content\">\n<div class=\"paragraph\">\n<p>ãŸã ã€æœ€åˆã‹ã‚‰ <code>noatime</code> ã«è¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ã‚‚ã€‚</p>\n</div>\n<div \n    class=\"listingblock no-line-numbers command-line\">\n<div class=\"title\">ãƒã‚¦ãƒ³ãƒˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ç¢ºèª</div>\n  <div class=\"content\">\n  <pre class=\"highlight command-line\" data-user=\"pi\"\n    data-host=\"raspi\"\n    data-output=\"2-10\"\n    ><code class=\"language-bash\"\n    data-lang=\"bash\">findmnt --target /\nTARGET SOURCE    FSTYPE OPTIONS\n/      /dev/sda2 ext4   rw,<strong class=\"text-red-400\">noatime</strong></code></pre>\n  </div>\n</div>\n</td>\n</tr>\n</table>\n</div>\n<div class=\"exampleblock\">\n<div class=\"title\">Example 2. /etc/fstab ã‹ã‚‰ãƒã‚¦ãƒ³ãƒˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’å¤‰æ›´</div>\n<div class=\"content\">\n<div \n    class=\"listingblock no-line-numbers command-line\">\n<div class=\"title\">/etc/fstab ã®ã‚µãƒ³ãƒ—ãƒ«</div>\n  <div class=\"content\">\n  <pre class=\"highlight command-line\" data-user=\"pi\"\n    data-host=\"raspi\"\n    data-output=\"2-10\"\n    ><code class=\"language-ini\"\n    data-lang=\"ini\"># Use noatime option\ntmpfs   /tmp            tmpfs   rw,async,nodev,nosuid,<strong class=\"text-red-400 underline\">noatime</strong>,size=256M,mode=0777               0 0\ntmpfs   /var/log        tmpfs   rw,async,noexec,nodev,nosuid,<strong class=\"text-red-400 underline\">noatime</strong>,size=64M,mode=0755         0 0</code></pre>\n  </div>\n</div>\n</div>\n</div>\n<div class=\"admonitionblock tip\">\n<table>\n<tr>\n<td class=\"icon\">\n<i class=\"fa icon-tip\" title=\"Tip\" data-md-icon=\"emoji_objects\"></i>\n</td>\n<td class=\"content\">\n<div class=\"title\">ã‚¢ã‚¯ã‚»ã‚¹æ—¥æ™‚æƒ…å ±ã«ã¤ã„ã¦</div>\n<div class=\"dlist\">\n<dl>\n<dt class=\"hdlist1\">atime</dt>\n<dd>\n<p>ãƒ•ã‚¡ã‚¤ãƒ«ãŒèª­ã¿è¾¼ã¾ã‚Œã‚‹åº¦ã«ã‚¢ã‚¯ã‚»ã‚¹æ—¥æ™‚ã‚’æ›¸ãè¾¼ã‚€ã€‚</p>\n</dd>\n<dt class=\"hdlist1\">noatime</dt>\n<dd>\n<p>ã‚¢ã‚¯ã‚»ã‚¹æ—¥æ™‚ã‚’ä¸€åˆ‡æ›¸ãè¾¼ã¾ãªã„ã€‚</p>\n</dd>\n<dt class=\"hdlist1\">relatime</dt>\n<dd>\n<p>ãƒ•ã‚¡ã‚¤ãƒ«ã«å¤‰æ›´ãŒã‚ã£ãŸæ™‚ã ã‘ã‚¢ã‚¯ã‚»ã‚¹æ—¥æ™‚ã‚’æ›¸ãè¾¼ã‚€ã€‚<br>\n<code>noatime</code> ã§ã¯ã†ã¾ãå‹•ã‹ãªã„ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒã‚ã‚‹å ´åˆã«æœ‰åŠ¹ã€‚</p>\n</dd>\n</dl>\n</div>\n</td>\n</tr>\n</table>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_ãƒ­ã‚°\">ğŸ“Šãƒ­ã‚°</h2>\n<div class=\"sectionbody\">\n<div class=\"sect2\">\n<h3 id=\"_tmpfs_ã‚’ä½¿ã£ã¦ãƒ¡ãƒ¢ãƒªä¸Šã«ãƒ­ã‚°ã‚’å‡ºåŠ›ã™ã‚‹\"><code>tmpfs</code> ã‚’ä½¿ã£ã¦ãƒ¡ãƒ¢ãƒªä¸Šã«ãƒ­ã‚°ã‚’å‡ºåŠ›ã™ã‚‹</h3>\n<div class=\"paragraph\">\n<p>äº‹ã‚ã‚‹ã”ã¨ã«ãƒ­ã‚°ã‚’ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«æ›¸ãè¾¼ã‚€ã“ã¨ã‚’æ­¢ã‚ã•ã›ã€ä»£ã‚ã‚Šã«ãƒ¡ãƒ¢ãƒªä¸Šã¸å‡ºåŠ›ã™ã‚‹ã‚ˆã†ã«ã•ã›ã‚‹ã€‚<br>\nğŸ‘‰ <code>/var/log</code>ï¼ˆã¨ã¤ã„ã§ã« <code>/tmp</code>ï¼‰ã‚’ <code>tmpfs</code> ã§ãƒã‚¦ãƒ³ãƒˆã™ã‚Œã°ã„ã„ã€‚</p>\n</div>\n<div class=\"admonitionblock caution\">\n<table>\n<tr>\n<td class=\"icon\">\n<i class=\"fa icon-caution\" title=\"Caution\" data-md-icon=\"local_fire_department\"></i>\n</td>\n<td class=\"content\">\nã“ã®ä½œæ¥­ã‚’è¡Œã†ã¨é›»æºã‚’è½ã¨ã™åº¦ã«ãƒ­ã‚°ãŒæ¶ˆãˆã¦ã—ã¾ã†ã“ã¨ã«æ³¨æ„ã™ã‚‹ã€‚\n</td>\n</tr>\n</table>\n</div>\n<div class=\"admonitionblock note\">\n<table>\n<tr>\n<td class=\"icon\">\n<i class=\"fa icon-note\" title=\"Note\" data-md-icon=\"info\"></i>\n</td>\n<td class=\"content\">\n<div class=\"paragraph\">\n<p>ã‚„ã£ã±ã‚Šãƒ­ã‚°ã‚’ä¿å­˜ã—ã¦ãŠããŸã„ã¨ã„ã†å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªæ–¹æ³•ãŒè€ƒãˆã‚‰ã‚Œã‚‹ã€‚</p>\n</div>\n<div class=\"ulist\">\n<ul>\n<li>\n<p><code>rsyslog</code> ã‚µãƒ¼ãƒãƒ¼ã‚’æ§‹ç¯‰ã—ã¦ã€ãã“ã¸ãƒ­ã‚°ã‚’è»¢é€ã•ã›ã‚‹</p>\n</li>\n<li>\n<p>ãƒ­ã‚°ä¿å­˜ç”¨ã®USBãƒ¡ãƒ¢ãƒªã¨ã‹ã‚’ç”¨æ„ã—ã¦ã€ãã“ã¸ãƒ­ã‚°ã‚’å‡ºåŠ›ã™ã‚‹</p>\n</li>\n<li>\n<p><code>Logwatch</code> ãªã©ã®ãƒ­ã‚°åé›†ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã†ã€‚</p>\n</li>\n</ul>\n</div>\n</td>\n</tr>\n</table>\n</div>\n<div class=\"exampleblock\">\n<div class=\"title\">Example 3. tmpfs ã¨ã—ã¦ãƒã‚¦ãƒ³ãƒˆã•ã›ã‚‹è¨­å®š</div>\n<div class=\"content\">\n<div class=\"paragraph\">\n<p><code>/var/log</code> ã¨ <code>/tmp</code> ã‚’ <code>tmpfs</code> ã¨ã—ã¦ãƒã‚¦ãƒ³ãƒˆã™ã‚‹ã‚ˆã†è¨­å®šå¤‰æ›´ã™ã‚‹ã€‚</p>\n</div>\n<div \n    class=\"listingblock\">\n<div class=\"title\">/etc/fstab ã«ä¸‹è¨˜ã‚’è¿½è¨˜</div>\n  <div class=\"content\">\n  <pre class=\"highlight \" ><code class=\"language-ini\"\n    data-lang=\"ini\">### ADD custom tmpfs\ntmpfs /tmp      tmpfs  rw,async,nodev,nosuid,noatime,size=256M,mode=0777        0 0\ntmpfs /var/log  tmpfs  rw,async,noexec,nodev,nosuid,noatime,size=64M,mode=0755  0 0</code></pre>\n  </div>\n</div>\n<div \n    class=\"listingblock no-line-numbers command-line\">\n<div class=\"title\">ãƒ­ã‚°ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’å–ã£ã¦ãŠã</div>\n  <div class=\"content\">\n  <pre class=\"highlight command-line\" data-user=\"pi\"\n    data-host=\"raspi\"\n    data-output=\"7\"\n    ><code class=\"language-bash\"\n    data-lang=\"bash\">sudo tar \\      <i class=\"conum\" data-value=\"1\"></i><b>(1)</b>\n    -czf /var/early-logs.tar.gz \\\n    --directory=/var/log .\nsudo rm -rf /var/log/*      <i class=\"conum\" data-value=\"2\"></i><b>(2)</b></code></pre>\n  </div>\n</div>\n<div class=\"colist arabic\">\n<table>\n<tr>\n<td><i class=\"conum\" data-value=\"1\"></i><b>1</b></td>\n<td>ç¾åœ¨ã® <code>/var/log</code> ã‚’åœ§ç¸®ã—ã¦ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã™ã‚‹ã€‚</td>\n</tr>\n<tr>\n<td><i class=\"conum\" data-value=\"2\"></i><b>2</b></td>\n<td>ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å¾Œã€<code>/var/log</code> ã‚’ç©ºã«ã™ã‚‹ã€‚<br>\nğŸ‘‰ ç©ºãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä»¥å¤–ã« <code>tmpfs</code> ã‚’ãƒã‚¦ãƒ³ãƒˆã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹ãŸã‚ã€‚</td>\n</tr>\n</table>\n</div>\n</div>\n</div>\n<div class=\"exampleblock\">\n<div class=\"title\">Example 4. systemdã‚µãƒ¼ãƒ“ã‚¹ã®ä¿®æ­£</div>\n<div class=\"content\">\n<div \n    class=\"listingblock no-line-numbers command-line\">\n<div class=\"title\">ã‚¨ãƒ©ãƒ¼å¯¾ç­–ã« rsyslog.service ã‚’ä¿®æ­£</div>\n  <div class=\"content\">\n  <pre class=\"highlight command-line\" data-user=\"pi\"\n    data-host=\"raspi\"\n    data-output=\"2,4-20\"\n    ><code class=\"language-bash\"\n    data-lang=\"bash\">sudo systemctl edit rsyslog.service</code></pre>\n  </div>\n</div>\n<div \n    class=\"listingblock\">\n\n  <div class=\"content\">\n  <pre class=\"highlight \" ><code class=\"language-ini\"\n    data-lang=\"ini\">[Unit]\nAfter=local-fs.target   <i class=\"conum\" data-value=\"1\"></i><b>(1)</b></code></pre>\n  </div>\n</div>\n<div class=\"colist arabic\">\n<table>\n<tr>\n<td><i class=\"conum\" data-value=\"1\"></i><b>1</b></td>\n<td><code>fstab</code> ã®å‡¦ç†ãŒçµ‚ã‚ã£ã¦ã‹ã‚‰ <code>rsyslog.service</code> ãŒèµ·å‹•ã™ã‚‹ã‚ˆã†ã«ä¿®æ­£ã€‚</td>\n</tr>\n</table>\n</div>\n<div \n    class=\"listingblock no-line-numbers command-line\">\n<div class=\"title\">ä¿®æ­£ã—ãŸè¨­å®šã‚’é©ç”¨</div>\n  <div class=\"content\">\n  <pre class=\"highlight command-line\" data-user=\"pi\"\n    data-host=\"raspi\"\n    data-output=\"2-10\"\n    ><code class=\"language-bash\"\n    data-lang=\"bash\">sudo systemctl daemon-reload</code></pre>\n  </div>\n</div>\n</div>\n</div>\n<hr>\n<div class=\"paragraph\">\n<p>ä¸Šè¨˜è¨­å®šå¾Œã€å†èµ·å‹•ã—ã¦é©ç”¨ã™ã‚‹ã€‚</p>\n</div>\n<div \n    class=\"listingblock no-line-numbers command-line\">\n<div class=\"title\">å†èµ·å‹•ã—ã¦è¨­å®šã‚’é©ç”¨</div>\n  <div class=\"content\">\n  <pre class=\"highlight command-line\" data-user=\"pi\"\n    data-host=\"raspi\"\n    data-output=\"2,4-10\"\n    ><code class=\"language-bash\"\n    data-lang=\"bash\">sudo reboot\n\nfindmnt --target /var/log   <i class=\"conum\" data-value=\"1\"></i><b>(1)</b>\nTARGET   SOURCE FSTYPE OPTIONS\n/var/log tmpfs  tmpfs  rw,nosuid,nodev,noexec,noatime,size=65536k,mode=755</code></pre>\n  </div>\n</div>\n<div class=\"colist arabic\">\n<table>\n<tr>\n<td><i class=\"conum\" data-value=\"1\"></i><b>1</b></td>\n<td><code>/var/log</code> ã®ãƒã‚¦ãƒ³ãƒˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒå¤‰æ›´ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªã€‚</td>\n</tr>\n</table>\n</div>\n</div>\n<div class=\"sect2\">\n<h3 id=\"_ãƒ­ã‚°ã®å‡ºåŠ›ã‚’æŠ‘åˆ¶\">ãƒ­ã‚°ã®å‡ºåŠ›ã‚’æŠ‘åˆ¶</h3>\n<div class=\"exampleblock\">\n<div class=\"content\">\n<div \n    class=\"listingblock no-line-numbers command-line\">\n<div class=\"title\">rsyslog è¨­å®šã‚’ä¿®æ­£</div>\n  <div class=\"content\">\n  <pre class=\"highlight command-line\" data-user=\"pi\"\n    data-host=\"raspi\"\n    data-output=\"3\"\n    ><code class=\"language-bash\"\n    data-lang=\"bash\">sudo cp /etc/rsyslog.conf{,.bk}\nsudo nano /etc/rsyslog.conf</code></pre>\n  </div>\n</div>\n<div \n    class=\"listingblock\">\n<div class=\"title\">ãƒ‡ãƒãƒƒã‚°æƒ…å ±ã¨ãƒ—ãƒªãƒ³ã‚¿ãƒ»ãƒ¡ãƒ¼ãƒ«ã®ãƒ­ã‚°ã¯å‡ºåŠ›ã—ãªã„</div>\n  <div class=\"content\">\n  <pre class=\"highlight \" ><code class=\"language-diff\"\n    data-lang=\"diff\">diff -U 0 --label before --label after /etc/rsyslog.conf{.bk,}\n--- before\n+++ after\n@@ -62 +62 @@\n-*.*;auth,authpriv.none         -/var/log/syslog\n+*.info;auth,authpriv.none      -/var/log/syslog\n@@ -64,5 +64,5 @@\n-daemon.*                       -/var/log/daemon.log\n-kern.*                         -/var/log/kern.log\n-lpr.*                          -/var/log/lpr.log\n-mail.*                         -/var/log/mail.log\n-user.*                         -/var/log/user.log\n+daemon.warn                    -/var/log/daemon.log\n+kern.warn                      -/var/log/kern.log\n+#lpr.*                         -/var/log/lpr.log\n+#mail.*                        -/var/log/mail.log\n+user.warn                      -/var/log/user.log\n@@ -74 +74 @@\n-mail.info                      -/var/log/mail.info\n+#mail.info                     -/var/log/mail.info\n@@ -81,3 +81,3 @@\n-*.=debug;\\\n-       auth,authpriv.none;\\\n-       news.none;mail.none     -/var/log/debug\n+#*.=debug;\\\n+#      auth,authpriv.none;\\\n+#      news.none;mail.none     -/var/log/debug</code></pre>\n  </div>\n</div>\n<div \n    class=\"listingblock no-line-numbers command-line\">\n<div class=\"title\">å¤‰æ›´ã—ãŸãƒ­ã‚°è¨­å®šã‚’é©ç”¨</div>\n  <div class=\"content\">\n  <pre class=\"highlight command-line\" data-user=\"pi\"\n    data-host=\"raspi\"\n    data-output=\"2-10\"\n    ><code class=\"language-bash\"\n    data-lang=\"bash\">sudo service rsyslog restart</code></pre>\n  </div>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect2\">\n<h3 id=\"_systemd_ã®_journal_ãƒ­ã‚°\">systemd ã® journal ãƒ­ã‚°</h3>\n<div class=\"paragraph\">\n<p>ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ <code>/run/log/journal</code> ã«ä¿å­˜ã•ã‚Œã‚‹ã€‚<br>\n<code>/run</code> ã¯ <code>tmpfs</code> ãªã®ã§ã€ä½•ã‚‚ã™ã‚‹å¿…è¦ãŒãªã„ã€‚ãã®ã¾ã¾ã§OKã€‚</p>\n</div>\n<div \n    class=\"listingblock no-line-numbers command-line\">\n\n  <div class=\"content\">\n  <pre class=\"highlight command-line\" data-user=\"pi\"\n    data-host=\"raspi\"\n    data-output=\"2-10\"\n    ><code class=\"language-bash\"\n    data-lang=\"bash\">findmnt --target /run/log/journal\nTARGET SOURCE FSTYPE OPTIONS\n/run   tmpfs  tmpfs  rw,nosuid,nodev,mode=755</code></pre>\n  </div>\n</div>\n</div>\n</div>\n</div>\n<div class=\"sect1\">\n<h2 id=\"_å‚è€ƒ\">ğŸ“–å‚è€ƒ</h2>\n<div class=\"sectionbody\">\n<div class=\"ulist\">\n<div class=\"title\">tmpfs</div>\n<ul>\n<li>\n<p><a href=\"https://qiita.com/girlfellfromsky/items/953ad71ad6ed09a97dfe\" target=\"_blank\" rel=\"noopener\">ãƒ©ã‚ºãƒ‘ã‚¤ã§ãƒ­ã‚°ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’RAM DISKã«ç§»è¡Œã™ã‚‹æ‰‹é †ã®ç°¡ç•¥åŒ– - Qiita</a></p>\n</li>\n</ul>\n</div>\n<div class=\"ulist\">\n<div class=\"title\">swap</div>\n<ul>\n<li>\n<p><a href=\"https://help.ubuntu.com/community/SwapFaq\" target=\"_blank\" rel=\"noopener\">SwapFaq - Community Help Wiki</a></p>\n</li>\n<li>\n<p><a href=\"https://manpages.debian.org/buster/dphys-swapfile/dphys-swapfile.8.en.html\" target=\"_blank\" rel=\"noopener\">dphys-swapfile(8) â€” dphys-swapfile â€” Debian buster â€” Debian Manpages</a></p>\n</li>\n</ul>\n</div>\n<div class=\"ulist\">\n<div class=\"title\">rsyslog</div>\n<ul>\n<li>\n<p><a href=\"https://knowledge.sakura.ad.jp/8969/\" target=\"_blank\" rel=\"noopener\">å¤šæ©Ÿèƒ½ãªãƒ­ã‚°ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã€Œrsyslogã€ã®åŸºæœ¬çš„ãªè¨­å®š | ã•ãã‚‰ã®ãƒŠãƒ¬ãƒƒã‚¸</a></p>\n</li>\n</ul>\n</div>\n<div class=\"ulist\">\n<div class=\"title\">logrotate</div>\n<ul>\n<li>\n<p><a href=\"https://linux.die.net/man/8/logrotate\" target=\"_blank\" rel=\"noopener\">logrotate(8) - Linux man page</a></p>\n</li>\n<li>\n<p><a href=\"https://qiita.com/Esfahan/items/a8058f1eb593170855a1\" target=\"_blank\" rel=\"noopener\">ä»»æ„ã®ãƒ­ã‚°ã‚’logrotateã‚’ä½¿ã£ã¦ç®¡ç†ã™ã‚‹ - Qiita</a></p>\n</li>\n</ul>\n</div>\n<div class=\"ulist\">\n<div class=\"title\">mount</div>\n<ul>\n<li>\n<p><a href=\"https://wiki.archlinux.jp/index.php/Fstab\" target=\"_blank\" rel=\"noopener\">fstab - ArchWiki</a></p>\n</li>\n<li>\n<p><a href=\"https://linux.die.net/man/8/mount\" target=\"_blank\" rel=\"noopener\">mount(8): mount filesystem - Linux man page</a></p>\n</li>\n</ul>\n</div>\n</div>\n</div>","title":"Raspberry Pi ã®èµ·å‹•ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼ˆSD/SSD/USBãƒ¡ãƒ¢ãƒªï¼‰ã®å¯¿å‘½ã‚’ä¼¸ã°ã™","created_at":"2021-09-24","tags":["raspi","raspi4b","å‚™å¿˜éŒ²"],"updated_at":"2021-09-24","author":"ç§‹ã€…ã™ã™ã","revision":"1.0"}