{
  "filename": "json_schema_on_vscode.adoc",
  "rendered": [
    "<div id=\"toc\" class=\"toc\">",
    "<div id=\"toctitle\">目次</div>",
    "<ul class=\"sectlevel1\">",
    "<li><a href=\"#_はじめに\">🥞はじめに</a></li>",
    "<li><a href=\"#_json_schema_作成\">⚙️<em>Json Schema</em> 作成</a>",
    "<ul class=\"sectlevel2\">",
    "<li><a href=\"#_json_schema_書き方_tips\"><em>Json Schema</em> 書き方 Tips</a>",
    "<ul class=\"sectlevel3\">",
    "<li><a href=\"#_declare-schema\"><em>Json Schema</em> の宣言</a></li>",
    "<li><a href=\"#_ref_キーワードによる他スキーマ参照\"><code>$ref</code> キーワードによる他スキーマ参照</a></li>",
    "<li><a href=\"#_プルダウンリストドロップダウンリスト的な使い方をしたい\">プルダウンリスト（ドロップダウンリスト）的な使い方をしたい</a></li>",
    "<li><a href=\"#_additional-properties\">任意のキーを許可したい</a></li>",
    "<li><a href=\"#_default_examples_example_の違いについて\">default, examples, example の違いについて</a></li>",
    "<li><a href=\"#_スキーマの合成\">スキーマの合成</a></li>",
    "<li><a href=\"#_条件分岐\">条件分岐</a></li>",
    "</ul>",
    "</li>",
    "</ul>",
    "</li>",
    "<li><a href=\"#_openapi_を_json_schema_ドキュメント代わりに利用する\">📚<em>OpenAPI</em> を <em>Json Schema</em> ドキュメント代わりに利用する</a></li>",
    "<li><a href=\"#_json_schema_を有効化して_json_データを作成\">📈<em>Json Schema</em> を有効化して <em>JSON</em> データを作成</a></li>",
    "<li><a href=\"#_補足_json_schema_書くのしんどい\">😫補足： <em>Json Schema</em> 書くのしんどい</a></li>",
    "<li><a href=\"#_参考\">📖参考</a></li>",
    "</ul>",
    "</div>",
    "<div class=\"sect1\">",
    "<h2 id=\"_はじめに\">🥞はじめに</h2>",
    "<div class=\"sectionbody\">",
    "<div class=\"paragraph\">",
    "<p>ちょっとしたデータを集めて <em>JSON</em> や <em>YAML</em> 形式で保存したいときがある。<br>",
    "このデータ収集が中長期的におよぶ場合、「どの項目を保存することにしたんだっけ……？」ってなるのを防ぎたい。</p>",
    "</div>",
    "<div class=\"paragraph\">",
    "<p>よって、<a href=\"https://json-schema.org\" target=\"_blank\" rel=\"noopener\"><strong><em>Json Schema</em></strong></a> を作成することで <em>JSON</em> データのスキーマを定義する。<br>",
    "<em>VS Code</em> では <em>Json Schema</em> を指定することでインテリセンスが有効になり、<em>JSON</em> データの入力も楽になって嬉しい。</p>",
    "</div>",
    "<div class=\"olist arabic mt-6\">",
    "<div class=\"title\">やること</div>",
    "<ol class=\"arabic\">",
    "<li>",
    "<p><em>Json Schema</em> を作成</p>",
    "</li>",
    "<li>",
    "<p><em>Json Schema</em> のドキュメント（ <em>in OpenAPI</em> ）を作成</p>",
    "</li>",
    "<li>",
    "<p>作成した <em>Json Schema</em> に則った <em>JSON</em> データを作成</p>",
    "</li>",
    "</ol>",
    "</div>",
    "<table class=\"tableblock frame-all grid-all fit-content\">",
    "<caption class=\"title\">Table 1. 環境</caption>",
    "<colgroup>",
    "<col>",
    "<col>",
    "</colgroup>",
    "<thead>",
    "<tr>",
    "<th class=\"tableblock halign-left valign-top\">App</th>",
    "<th class=\"tableblock halign-left valign-top\">Version</th>",
    "</tr>",
    "</thead>",
    "<tbody>",
    "<tr>",
    "<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\"><strong>VS Code</strong></p></td>",
    "<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\"><em>1.63.2</em></p></td>",
    "</tr>",
    "<tr>",
    "<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\"><strong><a href=\"https://json-schema.org\" target=\"_blank\" rel=\"noopener\">Json Schema</a></strong></p></td>",
    "<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\"><em>Draft 7</em></p></td>",
    "</tr>",
    "<tr>",
    "<td class=\"tableblock halign-center valign-top\" colspan=\"2\"><p class=\"tableblock\"><em>Json Schema（OpenAPI）プレビュー用</em></p></td>",
    "</tr>",
    "<tr>",
    "<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\"><strong><a href=\"https://marketplace.visualstudio.com/items?itemName=42Crunch.vscode-openapi\" target=\"_blank\" rel=\"noopener\">OpenAPI (Swagger) Editor</a></strong></p></td>",
    "<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\"><em>4.8.1</em></p></td>",
    "</tr>",
    "<tr>",
    "<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\"><strong><a href=\"https://marketplace.visualstudio.com/items?itemName=ms-vscode.live-server\" target=\"_blank\" rel=\"noopener\">Live Preview</a></strong></p></td>",
    "<td class=\"tableblock halign-left valign-top\"><p class=\"tableblock\"><em>0.2.12</em></p></td>",
    "</tr>",
    "</tbody>",
    "</table>",
    "</div>",
    "</div>",
    "<div class=\"sect1\">",
    "<h2 id=\"_json_schema_作成\">⚙️<em>Json Schema</em> 作成</h2>",
    "<div class=\"sectionbody\">",
    "<div class=\"olist arabic\">",
    "<ol class=\"arabic\">",
    "<li>",
    "<p><code>.json</code> ファイルを新規作成。<sup class=\"footnote\">[<a id=\"_footnoteref_1\" class=\"footnote\" href=\"#_footnotedef_1\" title=\"View footnote.\">1</a>]</sup></p>",
    "</li>",
    "<li>",
    "<p><em>VS Code</em> が対応している <em>Json Schema</em> の仕様バージョン <strong><em>Draft 7</em></strong> を指定（<a href=\"https://code.visualstudio.com/docs/languages/json#_json-schemas-and-settings\" target=\"_blank\" rel=\"noopener\">参考</a>）。</p>",
    "<div ",
    "    class=\"listingblock\">",
    "",
    "  <div class=\"content\">",
    "  <pre class=\"highlight \" ><code class=\"language-json\"",
    "    data-lang=\"json\">{ \"$schema\": \"http://json-schema.org/draft-07/schema#\" }</code></pre>",
    "  </div>",
    "</div>",
    "</li>",
    "<li>",
    "<p>上記より、<em>Json Schema</em> のインテリセンスが有効化されるので、それを利用してゴリゴリ書いていく。<br>",
    "<em>Json Schema</em> についての詳細は <a href=\"https://json-schema.org/understanding-json-schema/index.html\" target=\"_blank\" rel=\"noopener\">Understanding JSON Schema</a> ドキュメントを参考にする。</p>",
    "</li>",
    "</ol>",
    "</div>",
    "<div class=\"exampleblock\">",
    "<div class=\"title\">Example 1. Json Schema サンプル</div>",
    "<div class=\"content\">",
    "<div ",
    "    class=\"listingblock\">",
    "<div class=\"title\">myschema.json</div>",
    "  <div class=\"content\">",
    "  <pre class=\"highlight \" ><code class=\"language-json\"",
    "    data-lang=\"json\">{",
    "  \"$schema\": \"http://json-schema.org/draft-07/schema#\",   <i class=\"conum\" data-value=\"1\"></i><b>(1)</b>",
    "  \"title\": \"Fleet\",",
    "  \"description\": \"Fleet collection\",",
    "  \"type\": \"object\",",
    "  \"required\": [\"basic\", \"spec\"],  <i class=\"conum\" data-value=\"2\"></i><b>(2)</b>",
    "  \"properties\": {",
    "    \"basic\": { \"$ref\": \"#/definitions/BasicInfo\" },   <i class=\"conum\" data-value=\"3\"></i><b>(3)</b>",
    "    \"spec\": { \"$ref\": \"#/definitions/Spec\" }          <i class=\"conum\" data-value=\"3\"></i><b>(3)</b>",
    "  },",
    "  \"definitions\": {    <i class=\"conum\" data-value=\"4\"></i><b>(4)</b>",
    "    \"BasicInfo\": {",
    "      \"description\": \"基本情報\",",
    "      \"type\": \"object\",",
    "      \"required\": [\"registry\", \"name\", \"class\", \"type\"],  <i class=\"conum\" data-value=\"2\"></i><b>(2)</b>",
    "      \"properties\": {",
    "        \"registry\": { \"type\": \"string\", \"minLength\": 1 },",
    "        \"name\": { \"type\": \"string\", \"minLength\": 1 },",
    "        \"class\": { \"type\": \"string\", \"minLength\": 1 },",
    "        \"series_number\": { \"type\": \"integer\", \"minimum\": 1 },",
    "        \"type\": {",
    "          \"type\": \"string\",",
    "          \"enum\": [   <i class=\"conum\" data-value=\"5\"></i><b>(5)</b>",
    "            \"戦艦\",",
    "            \"巡洋戦艦\",",
    "            \"航空母艦\",",
    "            \"護衛空母\",",
    "            \"重巡洋艦\",",
    "            \"軽巡洋艦\",",
    "            \"駆逐艦\",",
    "            \"潜水艦\",",
    "            \"海防艦\",",
    "            \"補助艦艇\"",
    "          ]",
    "        },",
    "        \"launched\": { \"type\": \"string\", \"format\": \"date\" }",
    "      },",
    "      \"examples\": [   <i class=\"conum\" data-value=\"6\"></i><b>(6)</b>",
    "        {",
    "          \"registry\": \"JPN\",",
    "          \"name\": \"赤城\",",
    "          \"class\": \"赤城型\",",
    "          \"series_number\": 1,",
    "          \"type\": \"航空母艦\",",
    "          \"launched\": \"1925-04-22\"",
    "        }",
    "      ]",
    "    },",
    "    \"Spec\": {",
    "      \"type\": \"object\",",
    "      \"required\": [\"displacement\", \"length\", \"speed\"],  <i class=\"conum\" data-value=\"2\"></i><b>(2)</b>",
    "      \"properties\": {",
    "        \"displacement\": {",
    "          \"description\": \"基準排水量（ton）\",",
    "          \"type\": \"integer\",",
    "          \"minimum\": 1",
    "        },",
    "        \"length\": {",
    "          \"description\": \"全長（m）\",",
    "          \"type\": \"number\",",
    "          \"minimum\": 0.01",
    "        },",
    "        \"power\": {",
    "          \"description\": \"エンジンパワー（hp）\",",
    "          \"type\": \"integer\",",
    "          \"minimum\": 1",
    "        },",
    "        \"speed\": {",
    "          \"description\": \"最大速力（kt）\",",
    "          \"type\": \"number\",",
    "          \"minimum\": 1.0",
    "        }",
    "      },",
    "      \"examples\": [   <i class=\"conum\" data-value=\"6\"></i><b>(6)</b>",
    "        {",
    "          \"displacement\": 36500,",
    "          \"length\": 260.67,",
    "          \"power\": 133000,",
    "          \"speed\": 31.2",
    "        }",
    "      ]",
    "    }",
    "  }",
    "}</code></pre>",
    "  </div>",
    "</div>",
    "<div class=\"colist arabic\">",
    "<table>",
    "<tr>",
    "<td><i class=\"conum\" data-value=\"1\"></i><b>1</b></td>",
    "<td><a href=\"#_declare-schema\"><em>Json Schema</em> の宣言</a>。</td>",
    "</tr>",
    "<tr>",
    "<td><i class=\"conum\" data-value=\"2\"></i><b>2</b></td>",
    "<td><em>object</em> における必須プロパティを指定。</td>",
    "</tr>",
    "<tr>",
    "<td><i class=\"conum\" data-value=\"3\"></i><b>3</b></td>",
    "<td><code>$ref</code> キーワードにより他のスキーマを参照している。<br>",
    "<em>Json Schema</em> 評価時に参照されているスキーマが取得され、ここに適用される。</td>",
    "</tr>",
    "<tr>",
    "<td><i class=\"conum\" data-value=\"4\"></i><b>4</b></td>",
    "<td><code>$ref</code> で参照するスキーマをここで定義する。</td>",
    "</tr>",
    "<tr>",
    "<td><i class=\"conum\" data-value=\"5\"></i><b>5</b></td>",
    "<td>値として許可するものを列挙し、この中から選択させるようにする。</td>",
    "</tr>",
    "<tr>",
    "<td><i class=\"conum\" data-value=\"6\"></i><b>6</b></td>",
    "<td>このスキーマがとりうる値の例を記述。</td>",
    "</tr>",
    "</table>",
    "</div>",
    "<div ",
    "    class=\"listingblock\">",
    "<div class=\"title\">上記 Json Schema を適用したJSONデータの例</div>",
    "  <div class=\"content\">",
    "  <pre class=\"highlight \" ><code class=\"language-json\"",
    "    data-lang=\"json\">{",
    "  \"$schema\": \"./myschema.json\",",
    "  \"basic\": {",
    "    \"registry\": \"USA\",",
    "    \"name\": \"ジョンストン\",",
    "    \"class\": \"フレッチャー級\",",
    "    \"series_number\": 119,",
    "    \"type\": \"駆逐艦\",",
    "    \"launched\": \"1943-03-25\"",
    "  },",
    "  \"spec\": {",
    "    \"displacement\": 2700,",
    "    \"length\": 114.76,",
    "    \"power\": 60000,",
    "    \"speed\": 35.0",
    "  }",
    "}</code></pre>",
    "  </div>",
    "</div>",
    "</div>",
    "</div>",
    "<div class=\"sect2\">",
    "<h3 id=\"_json_schema_書き方_tips\"><em>Json Schema</em> 書き方 Tips</h3>",
    "<div class=\"paragraph\">",
    "<p><em>Json Schema</em> を書く上でのちょっとしたメモ。</p>",
    "</div>",
    "<div class=\"sect3\">",
    "<h4 id=\"_declare-schema\"><em>Json Schema</em> の宣言</h4>",
    "<div class=\"paragraph\">",
    "<p><code>$schema</code> キーワードで <em>Json Schema</em> およびそのバージョンを宣言する。<br>",
    "JSONデータのルートで定義する必要がある。</p>",
    "</div>",
    "<div class=\"exampleblock\">",
    "<div class=\"title\">Example 2. バージョン Draft 7 を宣言</div>",
    "<div class=\"content\">",
    "<div ",
    "    class=\"listingblock\">",
    "",
    "  <div class=\"content\">",
    "  <pre class=\"highlight \" ><code class=\"language-json\"",
    "    data-lang=\"json\">{ \"$schema\": \"http://json-schema.org/draft-07/schema#\" }</code></pre>",
    "  </div>",
    "</div>",
    "</div>",
    "</div>",
    "</div>",
    "<div class=\"sect3\">",
    "<h4 id=\"_ref_キーワードによる他スキーマ参照\"><a href=\"https://json-schema.org/understanding-json-schema/structuring.html#ref\" target=\"_blank\" rel=\"noopener\"><code>$ref</code> キーワード</a>による他スキーマ参照</h4>",
    "<div class=\"paragraph\">",
    "<p><code>$ref</code> キーワードを使って他のスキーマを参照することができる。<br>",
    "これにより、同じ設定を流用できたり深いネストになってしまうことを避けられる。</p>",
    "</div>",
    "<div class=\"paragraph\">",
    "<p><code>$ref</code> の値は <em>Base URI</em> からの <em>URI</em> 参照となる。<br>",
    "ファイル内部のスキーマを参照する場合、ルートは <code>#</code> で表現され、プロパティごとに <code>/</code> で区切る。</p>",
    "</div>",
    "<div class=\"exampleblock\">",
    "<div class=\"title\">Example 3. $ref</div>",
    "<div class=\"content\">",
    "<div ",
    "    class=\"listingblock\">",
    "",
    "  <div class=\"content\">",
    "  <pre class=\"highlight \" ><code class=\"language-json\"",
    "    data-lang=\"json\">{",
    "  \"type\": \"object\",",
    "  \"properties\": {",
    "    \"color\": { \"$ref\": \"#/definitions/SelectColor\" },",
    "  },",
    "  \"definitions\": {    <i class=\"conum\" data-value=\"1\"></i><b>(1)</b>",
    "    \"SelectColor\": {",
    "      \"type\": \"string\",",
    "      \"enum\": [\"red\", \"blue\", \"yellow\"]",
    "    }",
    "  }",
    "}</code></pre>",
    "  </div>",
    "</div>",
    "<div class=\"colist arabic\">",
    "<table>",
    "<tr>",
    "<td><i class=\"conum\" data-value=\"1\"></i><b>1</b></td>",
    "<td>参照用のスキーマは <code>definitions</code> キーワードで定義する<sup class=\"footnote\">[<a id=\"_footnoteref_2\" class=\"footnote\" href=\"#_footnotedef_2\" title=\"View footnote.\">2</a>]</sup>。</td>",
    "</tr>",
    "</table>",
    "</div>",
    "</div>",
    "</div>",
    "</div>",
    "<div class=\"sect3\">",
    "<h4 id=\"_プルダウンリストドロップダウンリスト的な使い方をしたい\">プルダウンリスト（ドロップダウンリスト）的な使い方をしたい</h4>",
    "<div class=\"paragraph\">",
    "<p>複数の固定値の中から1つを選択させたい場合は、<a href=\"https://json-schema.org/understanding-json-schema/reference/generic.html#enumerated-values\" target=\"_blank\" rel=\"noopener\"><code>enum</code> キーワード</a>を利用する。</p>",
    "</div>",
    "<div class=\"exampleblock\">",
    "<div class=\"title\">Example 4. 値を固定値から選ばせる</div>",
    "<div class=\"content\">",
    "<div ",
    "    class=\"listingblock\">",
    "",
    "  <div class=\"content\">",
    "  <pre class=\"highlight \" ><code class=\"language-json\"",
    "    data-lang=\"json\">{ \"enum\": [\"yellow\", \"green\", \"blue\"] }</code></pre>",
    "  </div>",
    "</div>",
    "</div>",
    "</div>",
    "<div class=\"admonitionblock tip\">",
    "<table>",
    "<tr>",
    "<td class=\"icon\">",
    "<i class=\"fa icon-tip\" title=\"Tip\" data-md-icon=\"emoji_objects\"></i>",
    "</td>",
    "<td class=\"content\">",
    "正規表現で <em>string</em> 値を制限したい場合は <a href=\"https://json-schema.org/understanding-json-schema/reference/string.html#regular-expressions\" target=\"_blank\" rel=\"noopener\"><code>pattern</code> キーワード</a>を利用する。",
    "</td>",
    "</tr>",
    "</table>",
    "</div>",
    "</div>",
    "<div class=\"sect3\">",
    "<h4 id=\"_additional-properties\">任意のキーを許可したい</h4>",
    "<div class=\"paragraph\">",
    "<p><code>additionalProperties</code> キーワードを利用すればいい。</p>",
    "</div>",
    "<div class=\"exampleblock\">",
    "<div class=\"title\">Example 5. 任意のキーを許可</div>",
    "<div class=\"content\">",
    "<div ",
    "    class=\"listingblock\">",
    "<div class=\"title\">schema.json</div>",
    "  <div class=\"content\">",
    "  <pre class=\"highlight \" ><code class=\"language-json\"",
    "    data-lang=\"json\">{",
    "  \"type\": \"object\",",
    "  \"additionalProperties\": { \"type\": \"string\" }  <i class=\"conum\" data-value=\"1\"></i><b>(1)</b>",
    "}</code></pre>",
    "  </div>",
    "</div>",
    "<div class=\"colist arabic\">",
    "<table>",
    "<tr>",
    "<td><i class=\"conum\" data-value=\"1\"></i><b>1</b></td>",
    "<td>任意キーの値について、スキーマを与える。<br>",
    "スキーマではなく <code>true</code> を与えると任意の値をとる。</td>",
    "</tr>",
    "</table>",
    "</div>",
    "<div ",
    "    class=\"listingblock\">",
    "",
    "  <div class=\"content\">",
    "  <pre class=\"highlight \" ><code class=\"language-json\"",
    "    data-lang=\"json\">{ \"example\": \"ok\" }</code></pre>",
    "  </div>",
    "</div>",
    "</div>",
    "</div>",
    "<div class=\"admonitionblock tip\">",
    "<table>",
    "<tr>",
    "<td class=\"icon\">",
    "<i class=\"fa icon-tip\" title=\"Tip\" data-md-icon=\"emoji_objects\"></i>",
    "</td>",
    "<td class=\"content\">",
    "一定の文字列パターンに従ったキーを許可したい場合は <code>patternProperties</code> を利用する。",
    "</td>",
    "</tr>",
    "</table>",
    "</div>",
    "</div>",
    "<div class=\"sect3\">",
    "<h4 id=\"_default_examples_example_の違いについて\">default, examples, example の違いについて</h4>",
    "<div class=\"dlist\">",
    "<dl>",
    "<dt class=\"hdlist1\">default</dt>",
    "<dd>",
    "<p>デフォルト値を明示するために使われる。<br>",
    "あくまでデフォルト値を明示するだけであり、ここで指定したからといって<strong>欠損値を埋める機能はない</strong><sup class=\"footnote\">[<a id=\"_footnoteref_3\" class=\"footnote\" href=\"#_footnotedef_3\" title=\"View footnote.\">3</a>]</sup>。</p>",
    "</dd>",
    "<dt class=\"hdlist1\">examples</dt>",
    "<dd>",
    "<p>スキーマに従ったJSONデータ値の例。<br>",
    "利用者に向けた使い方の例示。</p>",
    "</dd>",
    "<dt class=\"hdlist1\">example</dt>",
    "<dd>",
    "<p><em><strong>Open API</strong></em> で参照されるJSONデータ値の例。<br>",
    "<em>Open API</em> v3.0.x では <code>examples</code> キーが参照されないため、代わりにこちらを使う。</p>",
    "</dd>",
    "</dl>",
    "</div>",
    "</div>",
    "<div class=\"sect3\">",
    "<h4 id=\"_スキーマの合成\"><a href=\"https://json-schema.org/understanding-json-schema/reference/combining.html\" target=\"_blank\" rel=\"noopener\">スキーマの合成</a></h4>",
    "<div class=\"dlist\">",
    "<dl>",
    "<dt class=\"hdlist1\">allOf</dt>",
    "<dd>",
    "<p>すべてのサブスキーマに対して一致する必要がある（<em>AND</em>）。</p>",
    "</dd>",
    "<dt class=\"hdlist1\">anyOf</dt>",
    "<dd>",
    "<p>サブスキーマの内いずれかに一致する必要がある（<em>OR</em>）。</p>",
    "</dd>",
    "<dt class=\"hdlist1\">oneOf</dt>",
    "<dd>",
    "<p>サブスキーマの内ただ1つに一致する必要がある（<em>XOR</em>）。</p>",
    "</dd>",
    "<dt class=\"hdlist1\">not</dt>",
    "<dd>",
    "<p>与えられたスキーマに一致してはならない（<em>NOT</em>）。</p>",
    "</dd>",
    "</dl>",
    "</div>",
    "</div>",
    "<div class=\"sect3\">",
    "<h4 id=\"_条件分岐\"><a href=\"https://json-schema.org/understanding-json-schema/reference/conditionals.html\" target=\"_blank\" rel=\"noopener\">条件分岐</a></h4>",
    "<div class=\"ulist\">",
    "<ul>",
    "<li>",
    "<p>依存するプロパティやスキーマを指定する <code>dependentRequired</code>, <code>dependentSchemas</code> キーワード</p>",
    "</li>",
    "<li>",
    "<p>If-Then-Else 構文の <code>if</code>, <code>then</code>, <code>else</code> キーワード</p>",
    "</li>",
    "</ul>",
    "</div>",
    "<div class=\"paragraph\">",
    "<p>が使える。</p>",
    "</div>",
    "</div>",
    "</div>",
    "</div>",
    "</div>",
    "<div class=\"sect1\">",
    "<h2 id=\"_openapi_を_json_schema_ドキュメント代わりに利用する\">📚<em>OpenAPI</em> を <em>Json Schema</em> ドキュメント代わりに利用する</h2>",
    "<div class=\"sectionbody\">",
    "<div class=\"paragraph\">",
    "<p><em>Json Schema</em> をドキュメント化するツールはいくつかあるが、それぞれ <em>ruby</em> だったり <em>node.js</em> だったりの環境構築する必要があるので面倒くさい。</p>",
    "</div>",
    "<div class=\"paragraph\">",
    "<p>なので今回は <em>RESTful API</em> のドキュメントとして広く使われる <em>OpenAPI</em> ドキュメントを作成し、その中の一部として <em>Json Schema</em> を取り込ませる方法をとる。<br>",
    "<em>OpenAPI</em> エディター兼ビューワーとしては、<em>VS Code</em> の拡張機能 <a href=\"https://marketplace.visualstudio.com/items?itemName=42Crunch.vscode-openapi\" target=\"_blank\" rel=\"noopener\">OpenAPI (Swagger) Editor</a> を使用した。</p>",
    "</div>",
    "<div class=\"exampleblock\">",
    "<div class=\"title\">Example 6. OpenAPI で Json Schema ファイルを参照</div>",
    "<div class=\"content\">",
    "<div class=\"olist arabic\">",
    "<div class=\"title\">OpenAPI ドキュメントの作成手順</div>",
    "<ol class=\"arabic\">",
    "<li>",
    "<p><em>VS Code</em> 拡張機能 <a href=\"https://marketplace.visualstudio.com/items?itemName=42Crunch.vscode-openapi\" target=\"_blank\" rel=\"noopener\">OpenAPI (Swagger) Editor</a> をインストール。</p>",
    "</li>",
    "<li>",
    "<p>コマンドパレットから <em>Create new openapi v3.0 file</em> をクリック。<br>",
    "<em>JSON</em> または <em>YAML</em> 形式で新規作成される。</p>",
    "</li>",
    "<li>",
    "<p><code>content</code> 以下を追記し、作成した <em>Json Schema</em> を参照させる。</p>",
    "</li>",
    "<li>",
    "<p>あとは <code>Shift + Alt + P</code> ショートカットキーで <em>OpenAPI</em> プレビューが描画される。</p>",
    "</li>",
    "</ol>",
    "</div>",
    "<div ",
    "    class=\"listingblock\">",
    "<div class=\"title\">api.yml</div>",
    "  <div class=\"content\">",
    "  <pre class=\"highlight \" ><code class=\"language-yaml\"",
    "    data-lang=\"yaml\">openapi: \"3.0.2\"",
    "info:",
    "  title: API Title",
    "  version: \"1.0\"",
    "servers:",
    "  - url: https://api.server.test/v1",
    "paths:",
    "  /test:",
    "    get:",
    "      responses:",
    "        \"200\":",
    "          description: OK",
    "          content:  <i class=\"conum\" data-value=\"1\"></i><b>(1)</b>",
    "            application/json:",
    "              schema:",
    "                $ref: \"myschema.json\"   <i class=\"conum\" data-value=\"2\"></i><b>(2)</b></code></pre>",
    "  </div>",
    "</div>",
    "<div class=\"colist arabic\">",
    "<table>",
    "<tr>",
    "<td><i class=\"conum\" data-value=\"1\"></i><b>1</b></td>",
    "<td>この <code>content</code> 以下を追加。</td>",
    "</tr>",
    "<tr>",
    "<td><i class=\"conum\" data-value=\"2\"></i><b>2</b></td>",
    "<td><em>Json Schema</em> ファイルを指定する。</td>",
    "</tr>",
    "</table>",
    "</div>",
    "<details>",
    "<summary class=\"title\">上記のプレビュー例</summary>",
    "<div class=\"content\">",
    "<div class=\"imageblock\">",
    "<div class=\"content\">",
    "<img src=\"_images/openapi/openapi_sample_preview.png\" alt=\"api.yml のプレビュー例\">",
    "</div>",
    "</div>",
    "</div>",
    "</details>",
    "</div>",
    "</div>",
    "<div class=\"admonitionblock tip\">",
    "<table>",
    "<tr>",
    "<td class=\"icon\">",
    "<i class=\"fa icon-tip\" title=\"Tip\" data-md-icon=\"emoji_objects\"></i>",
    "</td>",
    "<td class=\"content\">",
    "<div class=\"title\">OpenAPI プレビュー表示</div>",
    "<div class=\"paragraph\">",
    "<p><em>OpenAPI (Swagger) Editor</em> のプレビュー描画エンジンを <em>redoc</em> に変更しておいたほうがスキーマを確認しやすい。</p>",
    "</div>",
    "<div ",
    "    class=\"listingblock\">",
    "<div class=\"title\">settings.json</div>",
    "  <div class=\"content\">",
    "  <pre class=\"highlight \" ><code class=\"language-json\"",
    "    data-lang=\"json\">{",
    "  \"openapi.defaultPreviewRenderer\": \"redoc\"",
    "}</code></pre>",
    "  </div>",
    "</div>",
    "</td>",
    "</tr>",
    "</table>",
    "</div>",
    "</div>",
    "</div>",
    "<div class=\"sect1\">",
    "<h2 id=\"_json_schema_を有効化して_json_データを作成\">📈<em>Json Schema</em> を有効化して <em>JSON</em> データを作成</h2>",
    "<div class=\"sectionbody\">",
    "<div class=\"admonitionblock important\">",
    "<table>",
    "<tr>",
    "<td class=\"icon\">",
    "<i class=\"fa icon-important\" title=\"Important\" data-md-icon=\"report\"></i>",
    "</td>",
    "<td class=\"content\">",
    "VS Code 上で利用することを前提。",
    "</td>",
    "</tr>",
    "</table>",
    "</div>",
    "<div class=\"paragraph\">",
    "<p><em>VS Code</em> でインテリセンスを有効化するには、</p>",
    "</div>",
    "<div class=\"olist arabic\">",
    "<ol class=\"arabic\">",
    "<li>",
    "<p>🌟 <em>JSON</em> ファイルにて <code>$schema</code> キーワードの値に <em>Json Schema</em> ファイルを指定する。</p>",
    "</li>",
    "<li>",
    "<p><code>settings.json</code> で適用する <em>Json Schema</em> とファイルパターンを指定する。</p>",
    "</li>",
    "</ol>",
    "</div>",
    "<div class=\"paragraph\">",
    "<p>の２通り。</p>",
    "</div>",
    "<div class=\"paragraph\">",
    "<p>あとは有効化されたインテリセンスをばんばん使って <em>JSON</em> を書けばいい。</p>",
    "</div>",
    "<div class=\"exampleblock\">",
    "<div class=\"title\">Example 7. VS Code で特定の Json Schema を有効化する設定</div>",
    "<div class=\"content\">",
    "<div ",
    "    class=\"listingblock\">",
    "<div class=\"title\">data.json</div>",
    "  <div class=\"content\">",
    "  <pre class=\"highlight \" ><code class=\"language-json\"",
    "    data-lang=\"json\">{",
    "  \"$schema\": \"./myschema/schema.json\",",
    "  ...",
    "}</code></pre>",
    "  </div>",
    "</div>",
    "<div class=\"paragraph\">",
    "<p>または</p>",
    "</div>",
    "<div ",
    "    class=\"listingblock\">",
    "<div class=\"title\">.vscode/settings.json</div>",
    "  <div class=\"content\">",
    "  <pre class=\"highlight \" ><code class=\"language-json\"",
    "    data-lang=\"json\">{",
    "  \"json.schemas\": [",
    "    {",
    "      \"fileMatch\": [\"/*.my.json\"],      <i class=\"conum\" data-value=\"1\"></i><b>(1)</b>",
    "      \"url\": \"./myschema/schema.json\"   <i class=\"conum\" data-value=\"2\"></i><b>(2)</b>",
    "    }",
    "  ]",
    "}</code></pre>",
    "  </div>",
    "</div>",
    "<div class=\"colist arabic\">",
    "<table>",
    "<tr>",
    "<td><i class=\"conum\" data-value=\"1\"></i><b>1</b></td>",
    "<td>スキーマを適用するファイルパスのパターンを指定。<br>",
    "ワイルドカード（<code>*</code>）や否定演算子（<code>!</code>）も利用できる。</td>",
    "</tr>",
    "<tr>",
    "<td><i class=\"conum\" data-value=\"2\"></i><b>2</b></td>",
    "<td>使用する <em>Json Schema</em> の <em>URI</em> を指定。<br>",
    "ローカルファイルを相対参照する場合、カレントディレクトリ（<code>.</code>）を指定しないとうまく解釈してくれない。</td>",
    "</tr>",
    "</table>",
    "</div>",
    "</div>",
    "</div>",
    "</div>",
    "</div>",
    "<div class=\"sect1\">",
    "<h2 id=\"_補足_json_schema_書くのしんどい\">😫補足： <em>Json Schema</em> 書くのしんどい</h2>",
    "<div class=\"sectionbody\">",
    "<div class=\"paragraph\">",
    "<p>すでに <em>JSON</em> データがある場合は <a href=\"https://quicktype.io\" target=\"_blank\" rel=\"noopener\">quicktype</a> を使うと楽ができる。<br>",
    "<em>quicktype</em> は <em>JSON</em> データから <em>Json Schema</em> を生成<sup class=\"footnote\">[<a id=\"_footnoteref_4\" class=\"footnote\" href=\"#_footnotedef_4\" title=\"View footnote.\">4</a>]</sup>してくれるツール。</p>",
    "</div>",
    "<div class=\"admonitionblock note\">",
    "<table>",
    "<tr>",
    "<td class=\"icon\">",
    "<i class=\"fa icon-note\" title=\"Note\" data-md-icon=\"info\"></i>",
    "</td>",
    "<td class=\"content\">",
    "<em>quicktype</em> は<a href=\"https://app.quicktype.io/\" target=\"_blank\" rel=\"noopener\">オンラインツール</a>としても提供されており、簡単に試せる。",
    "</td>",
    "</tr>",
    "</table>",
    "</div>",
    "</div>",
    "</div>",
    "<div class=\"sect1\">",
    "<h2 id=\"_参考\">📖参考</h2>",
    "<div class=\"sectionbody\">",
    "<div class=\"ulist\">",
    "<div class=\"title\">Json Schema</div>",
    "<ul>",
    "<li>",
    "<p><a href=\"https://json-schema.org/understanding-json-schema/reference/schema.html\" target=\"_blank\" rel=\"noopener\">Declaring a Dialect — Understanding JSON Schema 2020-12 documentation</a></p>",
    "</li>",
    "<li>",
    "<p><a href=\"https://json-schema.org/understanding-json-schema/reference/index.html\" target=\"_blank\" rel=\"noopener\">JSON Schema Reference — Understanding JSON Schema 2020-12 documentation</a></p>",
    "</li>",
    "<li>",
    "<p><a href=\"https://json-schema.org/understanding-json-schema/reference/combining.html\" target=\"_blank\" rel=\"noopener\">Schema Composition — Understanding JSON Schema 2020-12 documentation</a></p>",
    "</li>",
    "<li>",
    "<p><a href=\"https://json-schema.org/understanding-json-schema/reference/generic.html\" target=\"_blank\" rel=\"noopener\">Generic keywords — Understanding JSON Schema 2020-12 documentation</a></p>",
    "</li>",
    "</ul>",
    "</div>",
    "<div class=\"ulist\">",
    "<div class=\"title\">Open API</div>",
    "<ul>",
    "<li>",
    "<p><a href=\"https://swagger.io/specification/\" target=\"_blank\" rel=\"noopener\">OpenAPI Specification - Version 3.0.3 | Swagger</a></p>",
    "</li>",
    "<li>",
    "<p><a href=\"https://swagger.io/docs/specification/using-ref/\" target=\"_blank\" rel=\"noopener\">Using $ref</a></p>",
    "</li>",
    "</ul>",
    "</div>",
    "<div class=\"ulist\">",
    "<div class=\"title\">VS Code</div>",
    "<ul>",
    "<li>",
    "<p><a href=\"https://code.visualstudio.com/docs/languages/json\" target=\"_blank\" rel=\"noopener\">JSON editing in Visual Studio Code</a></p>",
    "</li>",
    "</ul>",
    "</div>",
    "</div>",
    "</div>",
    "<div id=\"footnotes\">",
    "<hr>",
    "<div class=\"footnote\" id=\"_footnotedef_1\">",
    "<a href=\"#_footnoteref_1\">1</a>. <em>YAML</em> ファイルでスキーマを作成し、<a href=\"https://mikefarah.gitbook.io/yq/\" target=\"_blank\" rel=\"noopener\"><code>yq</code> ツール</a>を使って <code>.json</code> ファイルに変換する、という方法もある。",
    "</div>",
    "<div class=\"footnote\" id=\"_footnotedef_2\">",
    "<a href=\"#_footnoteref_2\">2</a>. <em>Draft 2019-09</em> 以降は <code>$def</code> キーワードに変更されたらしい。",
    "</div>",
    "<div class=\"footnote\" id=\"_footnotedef_3\">",
    "<a href=\"#_footnoteref_3\">3</a>. <em>Json Schema</em> はJSONデータの仕様を定めるだけなので当然。欠損値を埋める処理は、JSONデータを受け取ったシステム側で実装されるべき。",
    "</div>",
    "<div class=\"footnote\" id=\"_footnotedef_4\">",
    "<a href=\"#_footnoteref_4\">4</a>. 他に <em>TypeScript</em> や <em>Go</em> 言語のコードへの変換も可能。",
    "</div>",
    "</div>"
  ],
  "title": "VS Code で Json Schema を作って使う",
  "created_at": "2022-01-26",
  "tags": [
    "json",
    "json-schema",
    "openapi",
    "vscode"
  ],
  "updated_at": "2022-01-26",
  "author": "秋々すすき",
  "revision": "1.0"
}